<html>

<head>
  <meta charset="UTF-8">
  <meta name="author" content="F U M">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Cache-Control" content="no-store, no-cache, must-revalidate, max-age=0">
  <meta http-equiv="Pragma" content="no-cache">
  <meta http-equiv="Expires" content="0">

  <script async src="https://www.googletagmanager.com/gtag/js?id=G-B89KY0993B"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-B89KY0993B');
  </script>

  <link rel="icon" type="image/x-icon" href="../../Asset/Image/favicon.ico">
  <link rel="apple-touch-icon" sizes="180x180" href="../../Asset/Image/Icon_1_2.jpg">
  <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP:100,300,400,500,700,900&display=swap"
    rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/@mdi/font@7.x/css/materialdesignicons.min.css" rel="stylesheet">
  <link href="../../Asset/CSS/Common.css?v=1.0" rel="stylesheet" />

  <title>Journey</title>

  <!-- Custom styles for a pop design -->
  <style>
    #Main {
      background-color: #f0f2f5;
    }
    .card-title-icon {
      margin-right: 12px;
      color: #4285F4; /* Google Blue */
    }
    .placeholder-sheet {
      border: 2px dashed #dcdcdc;
      background-color: #f5f5f5 !important;
      border-radius: 16px;
    }
    .placeholder-text {
      color: #757575;
      font-weight: 500;
    }
    .street-view-frame {
      border-radius: 16px;
    }
  </style>
</head>

<body>

  <v-app id="App" v-cloak>
    <template>

      <main-system-bar :drawer="Drawer" @change-drawer="ChangeDrawer">Service > Journey</main-system-bar>

      <v-main id="Main">
        <transition name="Fade_Page">
          <v-container v-show="Ready_Page" fluid class="pa-4">
            <v-row justify="center">
              <v-col cols="12" md="6">

                <v-card class="mx-auto" rounded="xl" elevation="2">
                  <v-card-title class="font-weight-bold text-h5 pb-0">
                    <v-icon class="card-title-icon" size="32">mdi-map-marker-path</v-icon>
                    World Journey
                  </v-card-title>
                  
                  <v-card-text class="pt-4">
                    <!-- Category Selection -->
                    <v-select 
                      v-model="selectedCategory" 
                      :items="categories" 
                      label="Category"
                      item-text="text"
                      item-value="value"
                      outlined
                      rounded
                      color="primary"
                      prepend-inner-icon="mdi-google-earth"
                      class="mt-4"
                    >
                    </v-select>

                    <!-- Location Selection -->
                    <v-select
                      v-model="selectedLocation"
                      :items="currentLocations"
                      label="Location"
                      item-text="name"
                      return-object
                      clearable
                      outlined
                      rounded
                      color="primary"
                      prepend-inner-icon="mdi-map-marker-outline"
                      :disabled="!selectedCategory"
                    ></v-select>

                    <!-- Google Maps Street View Display Area -->
                    <v-responsive :aspect-ratio="16/9" class="mt-0">
                      <!-- Street View after location selection -->
                      <iframe
                        v-if="selectedLocation"
                        :src="streetViewUrl"
                        width="100%"
                        height="100%"
                        style="border:0;"
                        allowfullscreen=""
                        loading="lazy"
                        class="street-view-frame">
                      </iframe>
                      <!-- Placeholder before location selection -->
                      <v-sheet v-else class="fill-height placeholder-sheet">
                          <v-row align="center" justify="center" class="fill-height text-center">
                              <v-col>
                                  <v-icon size="64" color="grey lighten-1">mdi-map-search-outline</v-icon>
                                  <div class="mt-4 text-h6 placeholder-text">Please select a location</div>
                              </v-col>
                          </v-row>
                      </v-sheet>
                    </v-responsive>
                  </v-card-text>
                </v-card>

              </v-col>
            </v-row>
          </v-container>
        </transition>
      </v-main>

      <main-navigation :drawer="Drawer" @change-drawer="ChangeDrawer"></main-navigation>
      <main-footer></main-footer>

    </template>
  </v-app>

  <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
  <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
  <script src="../../Asset/Javascript/Common.js?v=1.0"></script>

  <script>
    new Vue({
      el: '#App',
      vuetify: new Vuetify({
        theme: {
          themes: {
            light: {
              primary: '#4285F4', // Google Blue
            },
          },
        },
      }),
      mixins: [window.Mixins_Common],
      data: {
        // [IMPORTANT] Hardcoding API keys in client-side code is a security risk.
        // In a production environment, protect your key by managing it on the server-side.
        apiKey: 'AIzaSyC9AshiL5BlN8mF_LAKh_rGxvHMPdK3Mw0', 

        selectedCategory: 'world_heritage',
        categories: [
          { text: 'World Heritage', value: 'world_heritage' },
          { text: 'Unique Landscapes', value: 'unique_landscapes' },
          { text: 'Iconic Cities', value: 'iconic_cities' },
        ],
        selectedLocation: null,
        locations: {
          world_heritage: [
            { name: 'Machu Picchu, Peru', lat: -13.1651289, lng: -72.5444159, heading: 345.02, pitch: 1.72, fov: 90 },
            { name: 'Colosseum, Italy', lat: 41.89021, lng: 12.492231, heading: 240, pitch: 0, fov: 90 },
            { name: 'Pyramids of Giza, Egypt', lat: 29.976137, lng: 31.131315, heading: 65, pitch: 0, fov: 90 },
            { name: 'Great Wall of China (Mutianyu)', lat: 40.43147, lng: 116.57037, heading: 350, pitch: 0, fov: 90 },
            { name: 'Taj Mahal, India', lat: 27.175145, lng: 78.042142, heading: 180, pitch: 0, fov: 90 },
            { name: 'Petra, Jordan', lat: 30.32845, lng: 35.44436, heading: 35, pitch: 0, fov: 75 },
            { name: 'Angkor Wat, Cambodia', lat: 13.412499, lng: 103.866926, heading: 210, pitch: 5, fov: 90 },
            { name: 'Acropolis of Athens, Greece', lat: 37.971532, lng: 23.725749, heading: 290, pitch: 0, fov: 90 },
            { name: 'Stonehenge, UK', lat: 51.178882, lng: -1.826215, heading: 315, pitch: 0, fov: 90 },
          ],
          unique_landscapes: [
            { name: 'Grand Canyon, USA', lat: 36.0592, lng: -112.1098, heading: -30, pitch: 0, fov: 90 },
            { name: 'Avenue of the Baobabs, Madagascar', lat: -20.2509, lng: 44.4182, heading: 10, pitch: 0, fov: 90 },
            { name: 'Salar de Uyuni, Bolivia (Wet Season)', lat: -20.244249, lng: -67.453308, heading: 180, pitch: 0, fov: 90 },
            { name: 'Cappadocia, Turkey', lat: 38.65795, lng: 34.84813, heading: 100, pitch: 0, fov: 90 },
            { name: 'Zhangjiajie National Forest Park, China', lat: 29.33083, lng: 110.4384, heading: 20, pitch: -10, fov: 90 },
            { name: 'Cliffs of Moher, Ireland', lat: 52.97143, lng: -9.42436, heading: 240, pitch: 5, fov: 90 },
            { name: 'Plitvice Lakes National Park, Croatia', lat: 44.8878, lng: 15.6195, heading: 320, pitch: 0, fov: 90 },
            { name: 'Santorini (Oia), Greece', lat: 36.4618, lng: 25.3762, heading: 330, pitch: 0, fov: 90 },
            { name: 'Socotra Island, Yemen', lat: 12.486221, lng: 54.012581, heading: 90, pitch: 0, fov: 90 },
          ],
          iconic_cities: [
            { name: 'Times Square, New York, USA', lat: 40.758896, lng: -73.985130, heading: 185, pitch: 10, fov: 90 },
            { name: 'Eiffel Tower, Paris, France', lat: 48.85824, lng: 2.2945, heading: 210, pitch: 5, fov: 90 },
            { name: 'Shibuya Crossing, Tokyo, Japan', lat: 35.659489, lng: 139.700548, heading: 320, pitch: 0, fov: 90 },
            { name: 'London Eye, London, UK', lat: 51.503324, lng: -0.119543, heading: 45, pitch: 5, fov: 90 },
            { name: 'Burj Khalifa, Dubai, UAE', lat: 25.1972, lng: 55.2744, heading: 145, pitch: 15, fov: 90 },
            { name: 'Sydney Opera House, Australia', lat: -33.856784, lng: 151.215297, heading: 130, pitch: 0, fov: 90 },
            { name: 'Red Square, Moscow, Russia', lat: 55.75393, lng: 37.620795, heading: 15, pitch: 0, fov: 90 },
            { name: 'Christ the Redeemer, Rio de Janeiro, Brazil', lat: -22.951916, lng: -43.210487, heading: 0, pitch: 10, fov: 90 },
          ]
        }
      },
      computed: {
        currentLocations() {
          return this.locations[this.selectedCategory] || [];
        },
        streetViewUrl() {
          if (!this.selectedLocation) return '';

          const loc = this.selectedLocation;
          const base = 'https://www.google.com/maps/embed/v1/streetview';

          return `${base}?key=${this.apiKey}&location=${loc.lat},${loc.lng}&heading=${loc.heading}&pitch=${loc.pitch}&fov=${loc.fov}`;
        }
      },
      watch: {
        selectedCategory() {
          this.selectedLocation = null;
        }
      },
      mounted() {
        // To select the first location on initial load (optional)
        // if (this.currentLocations.length > 0) {
        //   this.selectedLocation = this.currentLocations[0];
        // }
      }
    })
  </script>
</body>

</html>