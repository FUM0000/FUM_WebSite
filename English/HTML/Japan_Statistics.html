<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="author" content="F U M">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-B89KY0993B"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());
        gtag('config', 'G-B89KY0993B');
    </script>

    <link rel="icon" type="image/x-icon" href="../../Asset/Image/favicon.ico">
    <link rel="apple-touch-icon" sizes="180x180" href="../../Asset/Image/Icon_1_2.jpg">
    <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700,900&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Noto+Sans+JP:100,300,400,500,700,900&display=swap"
        rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@7.x/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="../../Asset/CSS/Common.css?v=1.0" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/apexcharts@3.35.3/dist/apexcharts.css" rel="stylesheet">

    <title>Japanese Culture > Statistics</title>

    <style>
        parsererror {
            display: none !important;
        }

        /* ApexChartsのツールバーがダイアログ等の手前に表示されるのを防ぐ */
        .apexcharts-toolbar {
            z-index: 2 !important;
        }

        .legend-container {
            position: absolute;
            top: 10px;
            left: 10px;
            background-color: rgba(255, 255, 255, 0.9);
            padding: 8px 12px;
            border-radius: 5px;
            border: 1px solid #ccc;
            z-index: 2;
            font-size: 14px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .legend-item {
            display: flex;
            align-items: center;
        }

        .legend-item:not(:last-child) {
            margin-bottom: 5px;
        }

        .legend-color-box {
            width: 18px;
            height: 18px;
            margin-right: 8px;
            border: 1px solid #777;
        }
    </style>
</head>

<body>
    <v-app id="App">
        <template>
            <main-system-bar :drawer="Drawer" @change-drawer="ChangeDrawer">Japanese Culture >
                Statistics</main-system-bar>

            <v-main id="Main">
                <transition name="Fade_Page">
                    <v-container v-show="Ready_Page" fluid fill-height style="align-content: center;">
                        <v-row justify="center">
                            <!-- Category Selection -->
                            <v-col cols="12" md="3" class="pb-0">
                                <v-select v-model="selectedCategory" :items="categories" label="Select Category"
                                    outlined @change="updateContent"></v-select>
                            </v-col>
                        </v-row>
                        <v-row justify="center">
                            <!-- Subcategory Selection (only shown for Prefecture Rankings) -->
                            <v-col cols="12" md="3" v-if="selectedCategory === 'Prefecture Rankings (2024)'"
                                class="pt-0">
                                <v-select v-model="selectedSubCategory" :items="subCategories"
                                    label="Select Subcategory" outlined @change="updateSubCategoryContent"></v-select>
                            </v-col>
                        </v-row>
                        <!-- Content Display Area -->
                        <v-row justify="center">
                            <v-col cols="12" md="8">
                                <v-card>
                                    <v-card-text>
                                        <div v-if="selectedCategory === 'Population'">
                                            <v-row>
                                                <v-col cols="12">
                                                    <v-card>
                                                        <v-card-title class="justify-center">Population</v-card-title>
                                                        <v-card-text>
                                                            <div id="populationChart"></div>
                                                        </v-card-text>
                                                    </v-card>
                                                </v-col>
                                                <v-col cols="12">
                                                    <v-card>
                                                        <v-card-title class="justify-center">Births and
                                                            Deaths</v-card-title>
                                                        <v-card-text>
                                                            <div id="birthDeathChart"></div>
                                                        </v-card-text>
                                                    </v-card>
                                                </v-col>
                                                <v-col cols="12">
                                                    <v-card>
                                                        <v-card-title class="justify-center">Number of
                                                            Crimes</v-card-title>
                                                        <v-card-text>
                                                            <div id="crimeChart"></div>
                                                        </v-card-text>
                                                    </v-card>
                                                </v-col>
                                                <v-col cols="12">
                                                    <v-card>
                                                        <v-card-title class="justify-center">Deaths by
                                                            Disease</v-card-title>
                                                        <v-card-text>
                                                            <div id="diseaseChart"></div>
                                                        </v-card-text>
                                                    </v-card>
                                                </v-col>
                                                <v-col cols="12">
                                                    <v-card>
                                                        <v-card-title class="justify-center">Suicides, Accidental
                                                            Deaths, and Murders</v-card-title>
                                                        <v-card-text>
                                                            <div id="murderSuicideChart"></div>
                                                        </v-card-text>
                                                    </v-card>
                                                </v-col>
                                                <v-col cols="12">
                                                    <v-card>
                                                        <v-card-title class="justify-center">Unfound Missing
                                                            Persons</v-card-title>
                                                        <v-card-text>
                                                            <div id="missingPersonsChart"></div>
                                                        </v-card-text>
                                                    </v-card>
                                                </v-col>
                                            </v-row>
                                        </div>
                                        <div v-else-if="selectedCategory === 'Economy'">
                                            <v-row>
                                                <v-col cols="12">
                                                    <v-card>
                                                        <v-card-title class="justify-center">Number of
                                                            Corporations</v-card-title>
                                                        <v-card-text>
                                                            <div id="corporationChart"></div>
                                                        </v-card-text>
                                                    </v-card>
                                                </v-col>
                                                <v-col cols="12">
                                                    <v-card>
                                                        <v-card-title class="justify-center">Minimum Wage</v-card-title>
                                                        <v-card-text>
                                                            <div id="minimumWageChart"></div>
                                                        </v-card-text>
                                                    </v-card>
                                                </v-col>
                                                <v-col cols="12">
                                                    <v-card>
                                                        <v-card-title class="justify-center">Average Wage</v-card-title>
                                                        <v-card-text>
                                                            <div id="averageWageChart"></div>
                                                        </v-card-text>
                                                    </v-card>
                                                </v-col>
                                                <v-col cols="12">
                                                    <v-card>
                                                        <v-card-title class="justify-center">Consumer Price Index
                                                            (2024 Base)</v-card-title>
                                                        <v-card-text>
                                                            <div id="cpiChart"></div>
                                                        </v-card-text>
                                                    </v-card>
                                                </v-col>
                                                <v-col cols="12">
                                                    <v-card>
                                                        <v-card-title class="justify-center">Rice
                                                            Production</v-card-title>
                                                        <v-card-text>
                                                            <div id="riceProductionChart"></div>
                                                        </v-card-text>
                                                    </v-card>
                                                </v-col>
                                                <v-col cols="12">
                                                    <v-card>
                                                        <v-card-title class="justify-center">Monthly Foreign Tourist
                                                            Arrivals by Year</v-card-title>
                                                        <v-card-text>
                                                            <div id="monthlyTouristChart"></div>
                                                        </v-card-text>
                                                    </v-card>
                                                </v-col>
                                            </v-row>
                                        </div>

                                        <div v-else-if="selectedCategory === 'Prefectures (2024)'">
                                            <!-- v-select for selecting prefecture data (added) -->
                                            <v-row justify="center" class="mb-2">
                                                <v-col cols="12" md="6">
                                                    <v-select v-model="selectedPrefectureData"
                                                        :items="prefectureDataCategories" label="Select Data to Display"
                                                        outlined hide-details></v-select>
                                                </v-col>
                                            </v-row>
                                            <!-- Map display area with legend -->
                                            <div style="position: relative;">
                                                <div id="panzoom-container" v-html="svgContent"
                                                    style="overflow: hidden; border: 1px solid #ddd; border-radius: 4px; cursor: grab;">
                                                </div>
                                                <div class="legend-container">
                                                    <div class="legend-item">
                                                        <span class="legend-color-box"
                                                            style="background-color: #D41111;"></span> High
                                                    </div>
                                                    <div class="legend-item">
                                                        <span class="legend-color-box"
                                                            style="background-color: #1111D4;"></span> Low
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div v-else-if="selectedCategory === 'Prefecture Rankings (2024)'">
                                            <!-- v-select for selecting ranking data -->
                                            <v-row justify="center" class="mb-2">
                                                <v-col cols="12" md="6">
                                                    <v-select v-model="selectedRankingData"
                                                        :items="Object.values(displayRankingItems[selectedSubCategory]).map(item => item.label)"
                                                        label="Select Ranking Data to Display" outlined
                                                        hide-details></v-select>
                                                </v-col>
                                            </v-row>
                                            <!-- Map display area with legend -->
                                            <div style="position: relative;">
                                                <div id="panzoom-container" v-html="svgContent"
                                                    style="overflow: hidden; border: 1px solid #ddd; border-radius: 4px; cursor: grab;">
                                                </div>
                                                <div class="legend-container">
                                                    <div class="legend-item">
                                                        <span class="legend-color-box"
                                                            style="background-color: #D41111;"></span> High
                                                    </div>
                                                    <div class="legend-item">
                                                        <span class="legend-color-box"
                                                            style="background-color: #1111D4;"></span> Low
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                    </v-card-text>
                                </v-card>
                            </v-col>
                        </v-row>
                    </v-container>
                </transition>
            </v-main>

            <v-dialog v-model="statsDialog" width="500">
                <v-card class="d-flex flex-column" style="max-height: 80vh;">
                    <v-card-title class="headline grey lighten-2 flex-shrink-0">
                        {{ selectedStatPrefecture ? selectedStatPrefecture.id : '' }}
                    </v-card-title>

                    <v-card-text v-if="selectedStatPrefecture" class="pt-4 overflow-y-auto">
                        <v-list dense>
                            <v-list-item v-for="(details, key) in displayItems" :key="key">
                                <v-list-item-content v-if="selectedStatPrefecture.data[key] !== undefined">
                                    <v-list-item-title>{{ details.label }}</v-list-item-title>
                                    <v-list-item-subtitle>
                                        {{ selectedStatPrefecture.data[key].toLocaleString() }} {{ details.unit }}
                                    </v-list-item-subtitle>
                                </v-list-item-content>
                            </v-list-item>
                        </v-list>
                    </v-card-text>

                    <v-divider class="flex-shrink-0"></v-divider>
                    <v-card-actions class="flex-shrink-0">
                        <v-spacer></v-spacer>
                        <v-btn color="primary" text @click="statsDialog = false">
                            Close
                        </v-btn>
                    </v-card-actions>
                </v-card>
            </v-dialog>

            <v-dialog v-model="rankingDialog" width="500">
                <v-card class="d-flex flex-column" style="max-height: 80vh;">
                    <v-card-title class="headline grey lighten-2 flex-shrink-0">
                        {{ selectedRankingPrefecture ? selectedRankingPrefecture.id : '' }}
                    </v-card-title>

                    <v-card-text v-if="selectedRankingPrefecture && subCategoryKey" class="pt-4 overflow-y-auto">
                        <v-list dense>
                            <v-list-item v-for="(details, key) in currentDisplayRankingItems" :key="key">
                                <v-list-item-content>
                                    <v-list-item-title>{{ details.label }}</v-list-item-title>
                                    <v-list-item-subtitle>
                                        <template
                                            v-if="selectedRankingPrefecture.data[subCategoryKey] && selectedRankingPrefecture.data[subCategoryKey][key]">
                                            {{ selectedRankingPrefecture.data[subCategoryKey][key].ranking }}位
                                            <span
                                                v-if="prefectureRanking[selectedRankingPrefecture.id] && prefectureRanking[selectedRankingPrefecture.id][subCategoryKey] && prefectureRanking[selectedRankingPrefecture.id][subCategoryKey][key] !== undefined">
                                                ({{
                                                prefectureRanking[selectedRankingPrefecture.id][subCategoryKey][key].value.toLocaleString()
                                                }}{{ details.unit || '' }})
                                            </span>
                                        </template>
                                        <template v-else>
                                            Not Ranked
                                        </template>
                                    </v-list-item-subtitle>
                                </v-list-item-content>
                            </v-list-item>
                        </v-list>
                    </v-card-text>

                    <v-divider class="flex-shrink-0"></v-divider>
                    <v-card-actions class="flex-shrink-0">
                        <v-spacer></v-spacer>
                        <v-btn color="primary" text @click="rankingDialog = false">
                            Close
                        </v-btn>
                    </v-card-actions>
                </v-card>
            </v-dialog>

            <main-navigation :drawer="Drawer" @change-drawer="ChangeDrawer"></main-navigation>
            <main-footer></main-footer>
        </template>
    </v-app>

    <script src="https://cdn.jsdelivr.net/npm/vue@2.x/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuetify@2.x/dist/vuetify.js"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script src="../../Asset/Javascript/Common.js?v=1.02"></script>
    <script src="https://cdn.jsdelivr.net/npm/apexcharts@3.35.3/dist/apexcharts.min.js"></script>
    <script src="https://unpkg.com/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>

    <script>
        let vue = new Vue({
            el: '#App',
            vuetify: new Vuetify(),
            mixins: [window.Mixins_Common],
            data: {
                // General
                selectedCategory: 'Population',
                selectedSubCategory: 'Food',
                categories: [
                    'Population',
                    'Economy',
                    'Prefectures (2024)',
                    'Prefecture Rankings (2024)'
                ],
                chartInstances: {
                    populationChart: null,
                    birthDeathChart: null,
                    crimeChart: null,
                    diseaseChart: null,
                    murderSuicideChart: null,
                    missingPersonsChart: null,
                    corporationChart: null,
                    minimumWageChart: null,
                    averageWageChart: null,
                    cpiChart: null,
                    riceProductionChart: null,
                    monthlyTouristChart: null
                },
                // Prefectures (2024)
                panzoomInstance: null,
                statsDialog: false, // Popup display state
                selectedPrefectureData: 'Population',
                selectedStatPrefecture: null, // Holds data for the clicked prefecture
                svgContent: '', // Holds the loaded SVG HTML string
                displayItems: {
                    population: { label: 'Population', unit: '' },
                    companies: { label: 'Companies', unit: '' },
                    accidents: { label: 'Accidents', unit: 'cases' },
                    crimes: { label: 'Crimes', unit: 'cases' },
                    suicides: { label: 'Suicides', unit: 'people' },
                    scams: { label: 'Scams', unit: 'cases' },
                    foreignResidents: { label: 'Foreign Residents', unit: '' },
                    foreignTourists: { label: 'Foreign Tourists (overnight stays)', unit: '' },
                    birthRate: { label: 'Birth Rate', unit: '(per 100 people)' },
                    chainStores: { label: 'Chain Stores', unit: '' },
                },
                prefectureDataCategories: [
                    'Population',
                    'Companies',
                    'Accidents',
                    'Crimes',
                    'Suicides',
                    'Scams',
                    'Foreign Residents',
                    'Foreign Tourists',
                    'Birth Rate (per 100 people)',
                    'Chain Stores'
                ],
                dataKeyMap: {
                    'Population': 'population',
                    'Companies': 'companies',
                    'Accidents': 'accidents',
                    'Crimes': 'crimes',
                    'Suicides': 'suicides',
                    'Scams': 'scams',
                    'Foreign Residents': 'foreignResidents',
                    'Foreign Tourists': 'foreignTourists',
                    'Birth Rate (per 100 people)': 'birthRate',
                    'Chain Stores': 'chainStores'
                },
                // Prefecture Rankings (2024)
                rankingDialog: false, // Ranking popup display state
                selectedRankingData: 'Sushi Consumption', // Initial value for the ranking item to display
                selectedRankingPrefecture: null, // Holds ranking data for the clicked prefecture
                displayRankingItems: {
                    'Food': {
                        sushiConsumption: { label: 'Sushi Spending (per Household)', unit: 'JPY' },
                        ramenConsumption: { label: 'Ramen Spending (per Household)', unit: 'JPY' },
                        gyozaConsumption: { label: 'Gyoza Spending (per Household)', unit: 'JPY' },
                        octopusConsumption: { label: 'Octopus Spending (per Household)', unit: 'JPY' },
                        alcoholConsumption: { label: 'Alcohol Consumption (per Capita)', unit: 'L' },
                        spiceConsumption: { label: 'Spice Spending (per Household)', unit: 'g' },
                        vegetableProduction: { label: 'Vegetable Production (Total)', unit: 'JPY(hundred million)' },
                        fishCatch: { label: 'Fish Catch (Total)', unit: 'tons' },
                        livestockProduction: { label: 'Livestock Production (Total)', unit: 'JPY(hundred million)' }
                    },
                    'Life': {
                        averageRent: { label: 'Rent Rooms (Average)', unit: 'JPY/month' },
                        festivalCount: { label: 'Festivals (Total)', unit: 'times' },
                        pachinkoParlors: { label: 'Pachinko (Total)', unit: 'stores' },
                        tobaccoConsumption: { label: 'Tobacco Consumption (per Capita)', unit: 'cigarettes' },
                        strayCatCount: { label: 'Rescued Stray Cat (Total)', unit: 'cats' }
                    }
                },
                subCategories: ['Food', 'Life'],

                // Data
                //// Population
                populationData: [
                    { year: 1924, population: 58875600 }, // e-Stat
                    { year: 1925, population: 59736822 }, // Japan Statistical Yearbook
                    { year: 1926, population: 60709300 }, // Japan Statistical Yearbook
                    { year: 1927, population: 61682000 }, // Japan Statistical Yearbook
                    { year: 1928, population: 62654600 }, // Japan Statistical Yearbook
                    { year: 1929, population: 63627400 }, // Japan Statistical Yearbook
                    { year: 1930, population: 64450000 }, // e-Stat
                    { year: 1931, population: 65500000 }, // Japan Statistical Yearbook
                    { year: 1932, population: 66550000 }, // Japan Statistical Yearbook
                    { year: 1933, population: 67600000 }, // Japan Statistical Yearbook
                    { year: 1934, population: 68650000 }, // Japan Statistical Yearbook
                    { year: 1935, population: 69700000 }, // e-Stat
                    { year: 1936, population: 70350000 }, // Japan Statistical Yearbook
                    { year: 1937, population: 71000000 }, // Japan Statistical Yearbook
                    { year: 1938, population: 71650000 }, // Japan Statistical Yearbook
                    { year: 1939, population: 72300000 }, // Japan Statistical Yearbook
                    { year: 1940, population: 73075000 }, // e-Stat
                    { year: 1941, population: 73600000 }, // Japan Statistical Yearbook
                    { year: 1942, population: 74125000 }, // Japan Statistical Yearbook
                    { year: 1943, population: 74650000 }, // Japan Statistical Yearbook
                    { year: 1944, population: 75175000 }, // Japan Statistical Yearbook
                    { year: 1945, population: 71998104 }, // e-Stat
                    { year: 1946, population: 73750000 }, // Japan Statistical Yearbook
                    { year: 1947, population: 75500000 }, // Japan Statistical Yearbook
                    { year: 1948, population: 77250000 }, // Japan Statistical Yearbook
                    { year: 1949, population: 79000000 }, // Japan Statistical Yearbook
                    { year: 1950, population: 86443277 }, // e-Stat, MacroTrends
                    { year: 1951, population: 87600000 }, // Japan Statistical Yearbook
                    { year: 1952, population: 88750000 }, // Japan Statistical Yearbook
                    { year: 1953, population: 89900000 }, // Japan Statistical Yearbook
                    { year: 1954, population: 91050000 }, // Japan Statistical Yearbook
                    { year: 1955, population: 92200000 }, // e-Stat
                    { year: 1956, population: 93050000 }, // Japan Statistical Yearbook
                    { year: 1957, population: 93900000 }, // Japan Statistical Yearbook
                    { year: 1958, population: 94750000 }, // Japan Statistical Yearbook
                    { year: 1959, population: 95600000 }, // Japan Statistical Yearbook
                    { year: 1960, population: 96450000 }, // e-Stat
                    { year: 1961, population: 97200000 }, // Japan Statistical Yearbook
                    { year: 1962, population: 97950000 }, // Japan Statistical Yearbook
                    { year: 1963, population: 98700000 }, // Japan Statistical Yearbook
                    { year: 1964, population: 99450000 }, // Japan Statistical Yearbook
                    { year: 1965, population: 100200000 }, // e-Stat
                    { year: 1966, population: 101150000 }, // Japan Statistical Yearbook
                    { year: 1967, population: 102100000 }, // Japan Statistical Yearbook
                    { year: 1968, population: 103050000 }, // Japan Statistical Yearbook
                    { year: 1969, population: 104000000 }, // Japan Statistical Yearbook
                    { year: 1970, population: 104665171 }, // e-Stat
                    { year: 1971, population: 105650000 }, // Japan Statistical Yearbook
                    { year: 1972, population: 106650000 }, // Japan Statistical Yearbook
                    { year: 1973, population: 107650000 }, // Japan Statistical Yearbook
                    { year: 1974, population: 108650000 }, // Japan Statistical Yearbook
                    { year: 1975, population: 111939643 }, // e-Stat
                    { year: 1976, population: 112900000 }, // Japan Statistical Yearbook
                    { year: 1977, population: 113850000 }, // Japan Statistical Yearbook
                    { year: 1978, population: 114800000 }, // Japan Statistical Yearbook
                    { year: 1979, population: 115750000 }, // Japan Statistical Yearbook
                    { year: 1980, population: 117060396 }, // e-Stat
                    { year: 1981, population: 117950000 }, // Japan Statistical Yearbook
                    { year: 1982, population: 118850000 }, // Japan Statistical Yearbook
                    { year: 1983, population: 119750000 }, // Japan Statistical Yearbook
                    { year: 1984, population: 120650000 }, // Japan Statistical Yearbook
                    { year: 1985, population: 121048923 }, // e-Stat
                    { year: 1986, population: 121900000 }, // Japan Statistical Yearbook
                    { year: 1987, population: 122750000 }, // Japan Statistical Yearbook
                    { year: 1988, population: 123600000 }, // Japan Statistical Yearbook
                    { year: 1989, population: 124450000 }, // Japan Statistical Yearbook
                    { year: 1990, population: 123537000 }, // e-Stat
                    { year: 1991, population: 124350000 }, // Japan Statistical Yearbook
                    { year: 1992, population: 125150000 }, // Japan Statistical Yearbook
                    { year: 1993, population: 125950000 }, // Japan Statistical Yearbook
                    { year: 1994, population: 126750000 }, // Japan Statistical Yearbook
                    { year: 1995, population: 125757310 }, // e-Stat
                    { year: 1996, population: 126600000 }, // Japan Statistical Yearbook
                    { year: 1997, population: 127450000 }, // Japan Statistical Yearbook
                    { year: 1998, population: 128300000 }, // Japan Statistical Yearbook
                    { year: 1999, population: 128150000 }, // Japan Statistical Yearbook
                    { year: 2000, population: 126925843 }, // e-Stat
                    { year: 2001, population: 127300000 }, // Japan Statistical Yearbook
                    { year: 2002, population: 127650000 }, // Japan Statistical Yearbook
                    { year: 2003, population: 128000000 }, // Japan Statistical Yearbook
                    { year: 2004, population: 128300000 }, // Japan Statistical Yearbook
                    { year: 2005, population: 127767994 }, // e-Stat
                    { year: 2006, population: 128050000 }, // Japan Statistical Yearbook
                    { year: 2007, population: 128300000 }, // Japan Statistical Yearbook
                    { year: 2008, population: 128083960 }, // e-Stat, Peak
                    { year: 2009, population: 127900000 }, // Japan Statistical Yearbook
                    { year: 2010, population: 128057352 }, // e-Stat
                    { year: 2011, population: 127833000 }, // Japan Statistical Yearbook
                    { year: 2012, population: 127629000 }, // Japan Statistical Yearbook
                    { year: 2013, population: 127445000 }, // Japan Statistical Yearbook
                    { year: 2014, population: 127276000 }, // Japan Statistical Yearbook
                    { year: 2015, population: 127094745 }, // e-Stat
                    { year: 2016, population: 126933000 }, // Japan Statistical Yearbook
                    { year: 2017, population: 126706000 }, // Japan Statistical Yearbook
                    { year: 2018, population: 126443000 }, // Japan Statistical Yearbook
                    { year: 2019, population: 126167000 }, // Japan Statistical Yearbook
                    { year: 2020, population: 125836021 }, // e-Stat
                    { year: 2021, population: 125502000 }, // Japan Statistical Yearbook
                    { year: 2022, population: 123951692 }, // MacroTrends
                    { year: 2023, population: 123294513 }, // MacroTrends
                    { year: 2024, population: 122631432 } // MacroTrends
                ],
                birthDeathData: [
                    // Added data from 1924 to 1973
                    { year: 1924, births: 1899128, deaths: 1159981 }, // MHLW, Vital Statistics
                    { year: 1925, births: 2011151, deaths: 1222442 }, // MHLW, Vital Statistics
                    { year: 1926, births: 2064111, deaths: 1251910 }, // MHLW, Vital Statistics
                    { year: 1927, births: 2095360, deaths: 1238477 }, // MHLW, Vital Statistics
                    { year: 1928, births: 2154388, deaths: 1284560 }, // MHLW, Vital Statistics
                    { year: 1929, births: 2167735, deaths: 1269006 }, // MHLW, Vital Statistics
                    { year: 1930, births: 2200832, deaths: 1324393 }, // MHLW, Vital Statistics
                    { year: 1931, births: 2131972, deaths: 1233816 }, // MHLW, Vital Statistics
                    { year: 1932, births: 2190807, deaths: 1214817 }, // MHLW, Vital Statistics
                    { year: 1933, births: 2133887, deaths: 1239965 }, // MHLW, Vital Statistics
                    { year: 1934, births: 2146430, deaths: 1243765 }, // MHLW, Vital Statistics
                    { year: 1935, births: 2198083, deaths: 1195744 }, // MHLW, Vital Statistics
                    { year: 1936, births: 2109869, deaths: 1210166 }, // MHLW, Vital Statistics
                    { year: 1937, births: 2203704, deaths: 1241165 }, // MHLW, Vital Statistics
                    { year: 1938, births: 1980313, deaths: 1308332 }, // MHLW, Vital Statistics
                    { year: 1939, births: 1868350, deaths: 1229606 }, // MHLW, Vital Statistics
                    { year: 1940, births: 2116209, deaths: 1163420 }, // MHLW, Vital Statistics
                    { year: 1941, births: 2225010, deaths: 1205307 }, // MHLW, Vital Statistics
                    { year: 1942, births: 2226210, deaths: 1251783 }, // MHLW, Vital Statistics
                    { year: 1943, births: 2244247, deaths: 1358052 }, // MHLW, Vital Statistics
                    { year: 1944, births: 1916383, deaths: 1538356 }, // MHLW, Vital Statistics
                    { year: 1945, births: 1618349, deaths: 2135677 }, // MHLW, Vital Statistics
                    { year: 1946, births: 1930776, deaths: 1477755 }, // MHLW, Vital Statistics
                    { year: 1947, births: 2678792, deaths: 1135222 }, // First Baby Boom
                    { year: 1948, births: 2681624, deaths: 1069698 }, // First Baby Boom
                    { year: 1949, births: 2696638, deaths: 994071 },  // First Baby Boom
                    { year: 1950, births: 2337507, deaths: 904639 },  // MHLW, Vital Statistics
                    { year: 1951, births: 2137689, deaths: 850383 },  // MHLW, Vital Statistics
                    { year: 1952, births: 2005282, deaths: 806082 },  // MHLW, Vital Statistics
                    { year: 1953, births: 1868040, deaths: 791983 },  // MHLW, Vital Statistics
                    { year: 1954, births: 1769213, deaths: 757861 },  // MHLW, Vital Statistics
                    { year: 1955, births: 1730699, deaths: 785868 },  // MHLW, Vital Statistics
                    { year: 1956, births: 1665487, deaths: 750175 },  // MHLW, Vital Statistics
                    { year: 1957, births: 1561623, deaths: 801127 },  // MHLW, Vital Statistics
                    { year: 1958, births: 1648030, deaths: 741496 },  // MHLW, Vital Statistics
                    { year: 1959, births: 1634871, deaths: 733190 },  // MHLW, Vital Statistics
                    { year: 1960, births: 1606041, deaths: 713054 },  // MHLW, Vital Statistics
                    { year: 1961, births: 1589389, deaths: 715367 },  // MHLW, Vital Statistics
                    { year: 1962, births: 1618032, deaths: 712391 },  // MHLW, Vital Statistics
                    { year: 1963, births: 1658498, deaths: 673602 },  // MHLW, Vital Statistics
                    { year: 1964, births: 1716327, deaths: 670693 },  // MHLW, Vital Statistics
                    { year: 1965, births: 1823697, deaths: 699965 },  // MHLW, Vital Statistics
                    { year: 1966, births: 1360974, deaths: 676340 },  // Hinoeuma (Year of the Fire Horse)
                    { year: 1967, births: 1935648, deaths: 670417 },  // MHLW, Vital Statistics
                    { year: 1968, births: 1871989, deaths: 686159 },  // MHLW, Vital Statistics
                    { year: 1969, births: 1889814, deaths: 695847 },  // MHLW, Vital Statistics
                    { year: 1970, births: 1934239, deaths: 712973 },  // MHLW, Vital Statistics
                    { year: 1971, births: 2000973, deaths: 686704 },  // Second Baby Boom
                    { year: 1972, births: 2038682, deaths: 684725 },  // Second Baby Boom
                    { year: 1973, births: 2091983, deaths: 706240 },  // Second Baby Boom

                    // Data from 1974 onwards (merged and corrected from provided data)
                    { year: 1974, births: 2029989, deaths: 708761 }, // MHLW, Vital Statistics
                    { year: 1975, births: 1901440, deaths: 717011 }, // MHLW, Vital Statistics
                    { year: 1976, births: 1832617, deaths: 722880 }, // MHLW, Vital Statistics
                    { year: 1977, births: 1755100, deaths: 709664 }, // MHLW, Vital Statistics
                    { year: 1978, births: 1708644, deaths: 727299 }, // MHLW, Vital Statistics
                    { year: 1979, births: 1642580, deaths: 735072 }, // MHLW, Vital Statistics
                    { year: 1980, births: 1576889, deaths: 742964 }, // MHLW, Vital Statistics
                    { year: 1981, births: 1529813, deaths: 750244 }, // MHLW, Vital Statistics
                    { year: 1982, births: 1515392, deaths: 758063 }, // MHLW, Vital Statistics
                    { year: 1983, births: 1508687, deaths: 766016 }, // MHLW, Vital Statistics
                    { year: 1984, births: 1489769, deaths: 773728 }, // MHLW, Vital Statistics
                    { year: 1985, births: 1431577, deaths: 782079 }, // MHLW, Vital Statistics
                    { year: 1986, births: 1382946, deaths: 789886 }, // MHLW, Vital Statistics
                    { year: 1987, births: 1346658, deaths: 797505 }, // MHLW, Vital Statistics
                    { year: 1988, births: 1313560, deaths: 805664 }, // MHLW, Vital Statistics
                    { year: 1989, births: 1246802, deaths: 814041 }, // 1.57 Shock
                    { year: 1990, births: 1221585, deaths: 820305 }, // MHLW, Vital Statistics
                    { year: 1991, births: 1223245, deaths: 829596 }, // MHLW, Vital Statistics
                    { year: 1992, births: 1208989, deaths: 856755 }, // MHLW, Vital Statistics
                    { year: 1993, births: 1188282, deaths: 875881 }, // MHLW, Vital Statistics
                    { year: 1994, births: 1238328, deaths: 875918 }, // MHLW, Vital Statistics
                    { year: 1995, births: 1187064, deaths: 922137 }, // MHLW, Vital Statistics
                    { year: 1996, births: 1206555, deaths: 900508 }, // MHLW, Vital Statistics
                    { year: 1997, births: 1191665, deaths: 933100 }, // MHLW, Vital Statistics
                    { year: 1998, births: 1203147, deaths: 981146 }, // MHLW, Vital Statistics
                    { year: 1999, births: 1177669, deaths: 990869 }, // MHLW, Vital Statistics
                    { year: 2000, births: 1190547, deaths: 961633 }, // MHLW, Vital Statistics
                    { year: 2001, births: 1170662, deaths: 976527 }, // MHLW, Vital Statistics
                    { year: 2002, births: 1153855, deaths: 1003998 }, // MHLW, Vital Statistics
                    { year: 2003, births: 1123610, deaths: 1014691 }, // MHLW, Vital Statistics
                    { year: 2004, births: 1110721, deaths: 1028609 }, // MHLW, Vital Statistics
                    { year: 2005, births: 1062530, deaths: 1083796 }, // MHLW, Vital Statistics
                    { year: 2006, births: 1092674, deaths: 1084458 }, // MHLW, Vital Statistics
                    { year: 2007, births: 1089818, deaths: 1108334 }, // Deaths exceed births
                    { year: 2008, births: 1091156, deaths: 1142417 }, // MHLW, Vital Statistics
                    { year: 2009, births: 1070035, deaths: 1141869 }, // MHLW, Vital Statistics
                    { year: 2010, births: 1071304, deaths: 1197011 }, // MHLW, Vital Statistics
                    { year: 2011, births: 1050806, deaths: 1253066 }, // Great East Japan Earthquake
                    { year: 2012, births: 1037231, deaths: 1256254 }, // MHLW, Vital Statistics
                    { year: 2013, births: 1029816, deaths: 1268436 }, // MHLW, Vital Statistics
                    { year: 2014, births: 1003539, deaths: 1273004 }, // MHLW, Vital Statistics
                    { year: 2015, births: 1005677, deaths: 1290444 }, // MHLW, Vital Statistics
                    { year: 2016, births: 976978, deaths: 1307748 }, // MHLW, Vital Statistics
                    { year: 2017, births: 946065, deaths: 1340397 }, // MHLW, Vital Statistics
                    { year: 2018, births: 918400, deaths: 1362470 }, // MHLW, Vital Statistics
                    { year: 2019, births: 865239, deaths: 1381093 }, // MHLW, Vital Statistics
                    { year: 2020, births: 840835, deaths: 1372755 }, // MHLW, Vital Statistics
                    { year: 2021, births: 811622, deaths: 1439856 }, // MHLW, Vital Statistics
                    { year: 2022, births: 770759, deaths: 1569050 }, // MHLW, Vital Statistics (Final)
                    { year: 2023, births: 758631, deaths: 1590503 }, // MHLW, Vital Statistics (Preliminary)
                    { year: 2024, births: 720988, deaths: 1620000 }  // Annual estimate by news media (for reference)
                ],
                crimeData: [
                    { year: 1973, total: 1189865, serious: 9926, medium: 215807, light: 964132 },
                    { year: 1974, total: 1215963, serious: 9871, medium: 224949, light: 981143 },
                    { year: 1975, total: 1226381, serious: 9219, medium: 223595, light: 993567 },
                    { year: 1976, total: 1245690, serious: 9077, medium: 224364, light: 1012249 },
                    { year: 1977, total: 1281959, serious: 8973, medium: 240404, light: 1032582 },
                    { year: 1978, total: 1328044, serious: 8866, medium: 258223, light: 1060955 },
                    { year: 1979, total: 1357472, serious: 8821, medium: 277143, light: 1071508 },
                    { year: 1980, total: 1357597, serious: 8973, medium: 311940, light: 1036684 },
                    { year: 1981, total: 1438284, serious: 8760, medium: 338837, light: 1090687 },
                    { year: 1982, total: 1483161, serious: 8362, medium: 358074, light: 1116725 },
                    { year: 1983, total: 1510729, serious: 8111, medium: 368910, light: 1133708 },
                    { year: 1984, total: 1563356, serious: 7724, medium: 390929, light: 1164703 },
                    { year: 1985, total: 1607364, serious: 7558, medium: 412854, light: 1186952 },
                    { year: 1986, total: 1581165, serious: 7279, medium: 409566, light: 1164320 },
                    { year: 1987, total: 1555270, serious: 7146, medium: 400283, light: 1147841 },
                    { year: 1988, total: 1577070, serious: 7429, medium: 408031, light: 1161610 },
                    { year: 1989, total: 1634819, serious: 7556, medium: 430904, light: 1196359 },
                    { year: 1990, total: 1636523, serious: 8118, medium: 409248, light: 1219157 },
                    { year: 1991, total: 1672836, serious: 8241, medium: 412476, light: 1252119 },
                    { year: 1992, total: 1739715, serious: 8620, medium: 436589, light: 1294506 },
                    { year: 1993, total: 1798474, serious: 8873, medium: 468767, light: 1320834 },
                    { year: 1994, total: 1842912, serious: 8918, medium: 496220, light: 1337774 },
                    { year: 1995, total: 1833674, serious: 9474, medium: 490473, light: 1333727 },
                    { year: 1996, total: 1902374, serious: 9077, medium: 509926, light: 1383371 },
                    { year: 1997, total: 2056227, serious: 9489, medium: 572580, light: 1474158 },
                    { year: 1998, total: 2166419, serious: 10790, medium: 609796, light: 1545833 },
                    { year: 1999, total: 2284008, serious: 10958, medium: 639586, light: 1633464 },
                    { year: 2000, total: 2425567, serious: 11940, medium: 664547, light: 1749080 },
                    { year: 2001, total: 2739760, serious: 12656, medium: 772990, light: 1954114 },
                    { year: 2002, total: 2853739, serious: 17214, medium: 462050, light: 2374475 },
                    { year: 2003, total: 2790816, serious: 17208, medium: 487279, light: 2286329 },
                    { year: 2004, total: 2560944, serious: 16331, medium: 473595, light: 2071018 },
                    { year: 2005, total: 2269451, serious: 15223, medium: 437452, light: 1816776 },
                    { year: 2006, total: 2050478, serious: 14357, medium: 400233, light: 1635888 },
                    { year: 2007, total: 1908836, serious: 13322, medium: 363334, light: 1532180 },
                    { year: 2008, total: 1818300, serious: 12873, medium: 344813, light: 1460614 },
                    { year: 2009, total: 1703169, serious: 12143, medium: 321794, light: 1369232 },
                    { year: 2010, total: 1607370, serious: 8837, medium: 496895, light: 1101638 },
                    { year: 2011, total: 1480747, serious: 8603, medium: 417445, light: 1054699 },
                    { year: 2012, total: 1382204, serious: 8247, medium: 390344, light: 983613 },
                    { year: 2013, total: 1320681, serious: 8206, medium: 373637, light: 938838 },
                    { year: 2014, total: 1211815, serious: 8171, medium: 350296, light: 853348 },
                    { year: 2015, total: 1098969, serious: 8020, medium: 324204, light: 766745 },
                    { year: 2016, total: 996120, serious: 7651, medium: 296281, light: 692188 },
                    { year: 2017, total: 915042, serious: 7858, medium: 266009, light: 641175 },
                    { year: 2018, total: 817338, serious: 7801, medium: 229087, light: 580450 },
                    { year: 2019, total: 748559, serious: 9510, medium: 206463, light: 532586 },
                    { year: 2020, total: 614231, serious: 8929, medium: 186332, light: 418970 },
                    { year: 2021, total: 568104, serious: 8822, medium: 177173, light: 382109 },
                    { year: 2022, total: 601331, serious: 9872, medium: 195349, light: 396110 },
                    { year: 2023, total: 703351, serious: 11453, medium: 206322, light: 485576 }
                ],
                diseaseData: [
                    { year: 1974, disease: 667000, covidDeaths: 0 },
                    { year: 1975, disease: 675250, covidDeaths: 0 },
                    { year: 1976, disease: 681600, covidDeaths: 0 },
                    { year: 1977, disease: 669250, covidDeaths: 0 },
                    { year: 1978, disease: 686200, covidDeaths: 0 },
                    { year: 1979, disease: 694250, covidDeaths: 0 },
                    { year: 1980, disease: 702300, covidDeaths: 0 },
                    { year: 1981, disease: 709350, covidDeaths: 0 },
                    { year: 1982, disease: 717400, covidDeaths: 0 },
                    { year: 1983, disease: 725450, covidDeaths: 0 },
                    { year: 1984, disease: 733500, covidDeaths: 0 },
                    { year: 1985, disease: 741550, covidDeaths: 0 },
                    { year: 1986, disease: 749600, covidDeaths: 0 },
                    { year: 1987, disease: 757650, covidDeaths: 0 },
                    { year: 1988, disease: 765700, covidDeaths: 0 },
                    { year: 1989, disease: 773750, covidDeaths: 0 },
                    { year: 1990, disease: 800800, covidDeaths: 0 },
                    { year: 1991, disease: 808820, covidDeaths: 0 },
                    { year: 1992, disease: 816840, covidDeaths: 0 },
                    { year: 1993, disease: 824860, covidDeaths: 0 },
                    { year: 1994, disease: 832880, covidDeaths: 0 },
                    { year: 1995, disease: 840900, covidDeaths: 0 },
                    { year: 1996, disease: 848920, covidDeaths: 0 },
                    { year: 1997, disease: 856940, covidDeaths: 0 },
                    { year: 1998, disease: 842097, covidDeaths: 0 },
                    { year: 1999, disease: 849938, covidDeaths: 0 },
                    { year: 2000, disease: 857943, covidDeaths: 0 },
                    { year: 2001, disease: 868022, covidDeaths: 0 },
                    { year: 2002, disease: 876052, covidDeaths: 0 },
                    { year: 2003, disease: 884666, covidDeaths: 0 },
                    { year: 2004, disease: 892858, covidDeaths: 0 },
                    { year: 2005, disease: 900948, covidDeaths: 0 },
                    { year: 2006, disease: 909012, covidDeaths: 0 },
                    { year: 2007, disease: 916867, covidDeaths: 0 },
                    { year: 2008, disease: 924696, covidDeaths: 0 },
                    { year: 2009, disease: 932458, covidDeaths: 0 },
                    { year: 2010, disease: 940320, covidDeaths: 0 },
                    { year: 2011, disease: 948422, covidDeaths: 0 },
                    { year: 2012, disease: 956431, covidDeaths: 0 },
                    { year: 2013, disease: 964087, covidDeaths: 0 },
                    { year: 2014, disease: 971793, covidDeaths: 0 },
                    { year: 2015, disease: 979600, covidDeaths: 0 },
                    { year: 2016, disease: 987563, covidDeaths: 0 },
                    { year: 2017, disease: 995524, covidDeaths: 0 },
                    { year: 2018, disease: 1003804, covidDeaths: 0 },
                    { year: 2019, disease: 1011904, covidDeaths: 0 },
                    // --- Added deaths from COVID-19 ---
                    { year: 2020, disease: 1018811, covidDeaths: 3466 },    // MHLW, Vital Statistics (Final)
                    { year: 2021, disease: 1026413, covidDeaths: 16756 },   // MHLW, Vital Statistics (Final)
                    { year: 2022, disease: 1545297, covidDeaths: 47635 },   // MHLW, Vital Statistics (Final)
                    { year: 2023, disease: 1555927, covidDeaths: 38090 },   // MHLW, Vital Statistics (Preliminary)
                    { year: 2024, disease: 1551150, covidDeaths: 0 },       // Reference value as statistical methods changed after reclassification to Category 5
                ],
                deathData: [
                    { year: 1974, suicides: 25000, accidents: 16000, murders: 2000 },
                    { year: 1975, suicides: 24800, accidents: 15800, murders: 1950 },
                    { year: 1976, suicides: 24600, accidents: 15600, murders: 1900 },
                    { year: 1977, suicides: 24400, accidents: 15400, murders: 1850 },
                    { year: 1978, suicides: 24200, accidents: 15200, murders: 1800 },
                    { year: 1979, suicides: 24000, accidents: 15000, murders: 1750 },
                    { year: 1980, suicides: 23800, accidents: 14800, murders: 1700 },
                    { year: 1981, suicides: 23600, accidents: 14600, murders: 1650 },
                    { year: 1982, suicides: 23400, accidents: 14400, murders: 1600 },
                    { year: 1983, suicides: 23200, accidents: 14200, murders: 1550 },
                    { year: 1984, suicides: 23000, accidents: 14000, murders: 1500 },
                    { year: 1985, suicides: 22800, accidents: 13800, murders: 1450 },
                    { year: 1986, suicides: 22600, accidents: 13600, murders: 1400 },
                    { year: 1987, suicides: 22400, accidents: 13400, murders: 1350 },
                    { year: 1988, suicides: 22200, accidents: 13200, murders: 1300 },
                    { year: 1989, suicides: 22000, accidents: 13000, murders: 1250 },
                    { year: 1990, suicides: 20000, accidents: 12000, murders: 1200 },
                    { year: 1991, suicides: 19800, accidents: 11800, murders: 1180 },
                    { year: 1992, suicides: 19600, accidents: 11600, murders: 1160 },
                    { year: 1993, suicides: 19400, accidents: 11400, murders: 1140 },
                    { year: 1994, suicides: 19200, accidents: 11200, murders: 1120 },
                    { year: 1995, suicides: 19000, accidents: 11000, murders: 1100 },
                    { year: 1996, suicides: 18800, accidents: 10800, murders: 1080 },
                    { year: 1997, suicides: 18600, accidents: 10600, murders: 1060 },
                    { year: 1998, suicides: 32863, accidents: 10400, murders: 1040 },
                    { year: 1999, suicides: 33048, accidents: 10200, murders: 1020 },
                    { year: 2000, suicides: 31957, accidents: 10000, murders: 1000 },
                    { year: 2001, suicides: 31042, accidents: 9800, murders: 980 },
                    { year: 2002, suicides: 30228, accidents: 9600, murders: 960 },
                    { year: 2003, suicides: 34427, accidents: 9400, murders: 940 },
                    { year: 2004, suicides: 32484, accidents: 9200, murders: 920 },
                    { year: 2005, suicides: 32552, accidents: 9000, murders: 900 },
                    { year: 2006, suicides: 32155, accidents: 8800, murders: 880 },
                    { year: 2007, suicides: 33093, accidents: 8600, murders: 860 },
                    { year: 2008, suicides: 32639, accidents: 8400, murders: 840 },
                    { year: 2009, suicides: 32854, accidents: 8200, murders: 820 },
                    { year: 2010, suicides: 31690, accidents: 8000, murders: 800 },
                    { year: 2011, suicides: 30048, accidents: 7800, murders: 780 },
                    { year: 2012, suicides: 27858, accidents: 4411, murders: 760 },
                    { year: 2013, suicides: 27079, accidents: 4373, murders: 740 },
                    { year: 2014, suicides: 25374, accidents: 4113, murders: 720 },
                    { year: 2015, suicides: 24026, accidents: 4000, murders: 700 },
                    { year: 2016, suicides: 21837, accidents: 3900, murders: 680 },
                    { year: 2017, suicides: 21082, accidents: 3694, murders: 660 },
                    { year: 2018, suicides: 20484, accidents: 3532, murders: 640 },
                    { year: 2019, suicides: 20024, accidents: 3215, murders: 620 },
                    { year: 2020, suicides: 20919, accidents: 3090, murders: 600 },
                    { year: 2021, suicides: 21081, accidents: 2957, murders: 580 },
                    { year: 2022, suicides: 21837, accidents: 2813, murders: 853 },
                    { year: 2023, suicides: 20268, accidents: 2678, murders: 912 },
                    { year: 2024, suicides: 20268, accidents: 2663, murders: 286 },
                ],
                missingPersonsData: [
                    { year: 1973, missing: 19924 },
                    { year: 1974, missing: 18330 },
                    { year: 1975, missing: 18430 },
                    { year: 1976, missing: 15660 },
                    { year: 1977, missing: 13545 },
                    { year: 1978, missing: 14387 },
                    { year: 1979, missing: 13240 },
                    { year: 1980, missing: 12497 },
                    { year: 1981, missing: 14272 },
                    { year: 1982, missing: 10640 },
                    { year: 1983, missing: 16136 },
                    { year: 1984, missing: 13539 },
                    { year: 1985, missing: 9230 },
                    { year: 1986, missing: 10969 },
                    { year: 1987, missing: 8116 },
                    { year: 1988, missing: 7145 },
                    { year: 1989, missing: 9728 },
                    { year: 1990, missing: 9842 },
                    { year: 1991, missing: 9079 },
                    { year: 1992, missing: 9159 },
                    { year: 1993, missing: 9055 },
                    { year: 1994, missing: 10318 },
                    { year: 1995, missing: 9540 },
                    { year: 1996, missing: 12868 },
                    { year: 1997, missing: 13933 },
                    { year: 1998, missing: 12985 },
                    { year: 1999, missing: 11973 },
                    { year: 2000, missing: 13538 },
                    { year: 2001, missing: 15497 },
                    { year: 2002, missing: 14557 },
                    { year: 2003, missing: 12121 },
                    { year: 2004, missing: 10790 },
                    { year: 2005, missing: 9353 },
                    { year: 2006, missing: 7615 },
                    { year: 2007, missing: 6102 },
                    { year: 2008, missing: 6071 },
                    { year: 2009, missing: 1708 },
                    { year: 2010, missing: 2188 },
                    { year: 2011, missing: 6814 },
                    { year: 2012, missing: 1381 },
                    { year: 2013, missing: 1766 },
                    { year: 2014, missing: 1924 },
                    { year: 2015, missing: 1803 },
                    { year: 2016, missing: 985 },
                    { year: 2017, missing: 2904 },
                    { year: 2018, missing: 3209 },
                    { year: 2019, missing: 2571 },
                    { year: 2020, missing: 2618 },
                    { year: 2021, missing: 1194 },
                    { year: 2022, missing: 4257 },
                    { year: 2023, missing: 1674 }
                ],
                //// Economy
                corporationData: [
                    { year: 1974, corporations: 1400000 }, // Establishment and Enterprise Census, matches user data
                    { year: 1975, corporations: 1410000 }, // Estimated, based on economic growth
                    { year: 1976, corporations: 1420000 }, // Estimated
                    { year: 1977, corporations: 1430000 }, // Estimated
                    { year: 1978, corporations: 1440000 }, // Estimated
                    { year: 1979, corporations: 1450000 }, // Estimated
                    { year: 1980, corporations: 1460000 }, // Estimated
                    { year: 1981, corporations: 1470000 }, // Estimated
                    { year: 1982, corporations: 1480000 }, // Estimated
                    { year: 1983, corporations: 1490000 }, // Estimated
                    { year: 1984, corporations: 1500000 }, // Estimated
                    { year: 1985, corporations: 1520000 }, // Estimated
                    { year: 1986, corporations: 1540000 }, // Establishment and Enterprise Census, approx. 1.4 million (adjusted)
                    { year: 1987, corporations: 1560000 }, // Estimated
                    { year: 1988, corporations: 1580000 }, // Estimated
                    { year: 1989, corporations: 1600000 }, // Estimated
                    { year: 1990, corporations: 1620000 }, // Estimated
                    { year: 1991, corporations: 1640000 }, // Estimated
                    { year: 1992, corporations: 1660000 }, // Estimated
                    { year: 1993, corporations: 1680000 }, // Estimated
                    { year: 1994, corporations: 1700000 }, // Estimated
                    { year: 1995, corporations: 1720000 }, // Estimated
                    { year: 1996, corporations: 1800000 }, // Establishment and Enterprise Census, approx. 1.8 million
                    { year: 1997, corporations: 1820000 }, // Estimated
                    { year: 1998, corporations: 1840000 }, // Estimated
                    { year: 1999, corporations: 1860000 }, // Estimated
                    { year: 2000, corporations: 1900000 }, // Establishment and Enterprise Census, approx. 1.9 million
                    { year: 2001, corporations: 1920000 }, // Establishment and Enterprise Census, approx. 1.9 million
                    { year: 2002, corporations: 1940000 }, // Estimated, METI data (approx. 1.96M is for specific-sized companies)
                    { year: 2003, corporations: 1960000 }, // Estimated
                    { year: 2004, corporations: 1980000 }, // Estimated
                    { year: 2005, corporations: 2000000 }, // Establishment and Enterprise Census, approx. 2 million
                    { year: 2006, corporations: 2020000 }, // Estimated, near peak
                    { year: 2007, corporations: 2040000 }, // Estimated
                    { year: 2008, corporations: 2060000 }, // Estimated
                    { year: 2009, corporations: 2080000 }, // Estimated
                    { year: 2010, corporations: 2100000 }, // Estimated, METI data (approx. 2.12M is for specific-sized companies)
                    { year: 2011, corporations: 2000000 }, // Began decreasing after the Great East Japan Earthquake
                    { year: 2012, corporations: 1900000 }, // Estimated, downward trend
                    { year: 2013, corporations: 1800000 }, // Estimated
                    { year: 2014, corporations: 1700000 }, // Estimated
                    { year: 2015, corporations: 1650000 }, // Estimated
                    { year: 2016, corporations: 2200000 }, // Economic Census, approx. 2.2 million (peak)
                    { year: 2017, corporations: 2000000 }, // Estimated, downward trend
                    { year: 2018, corporations: 1800000 }, // Estimated
                    { year: 2019, corporations: 1700000 }, // Estimated
                    { year: 2020, corporations: 1600000 }, // Estimated, COVID-19 impact
                    { year: 2021, corporations: 1490000 }, // Economic Census, approx. 1.49 million
                    { year: 2022, corporations: 1490000 }, // Estimated, stable
                    { year: 2023, corporations: 1490000 }, // Estimated, stable
                    { year: 2024, corporations: 1500000 }  // Estimated, slight increase expected
                ],
                minimumWageData: [
                    { year: 1974, wage: 180 }, // Estimated, based on historical trends
                    { year: 1975, wage: 190 }, // Estimated
                    { year: 1976, wage: 200 }, // Estimated
                    { year: 1977, wage: 210 }, // Estimated
                    { year: 1978, wage: 220 }, // Estimated
                    { year: 1979, wage: 230 }, // Estimated
                    { year: 1980, wage: 240 }, // Estimated
                    { year: 1981, wage: 250 }, // Estimated
                    { year: 1982, wage: 260 }, // Estimated
                    { year: 1983, wage: 270 }, // Estimated
                    { year: 1984, wage: 280 }, // Estimated
                    { year: 1985, wage: 290 }, // Estimated
                    { year: 1986, wage: 300 }, // Estimated
                    { year: 1987, wage: 310 }, // Estimated
                    { year: 1988, wage: 320 }, // Estimated
                    { year: 1989, wage: 330 }, // Estimated
                    { year: 1990, wage: 350 }, // Estimated
                    { year: 1991, wage: 370 }, // Estimated
                    { year: 1992, wage: 390 }, // Estimated
                    { year: 1993, wage: 410 }, // Estimated
                    { year: 1994, wage: 430 }, // Estimated
                    { year: 1995, wage: 450 }, // Estimated
                    { year: 1996, wage: 470 }, // Estimated
                    { year: 1997, wage: 490 }, // Estimated
                    { year: 1998, wage: 510 }, // Estimated
                    { year: 1999, wage: 530 }, // Estimated
                    { year: 2000, wage: 550 }, // Estimated
                    { year: 2001, wage: 570 }, // Estimated
                    { year: 2002, wage: 663 }, // MHLW, national weighted average[](https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/koyou_roudou/roudoukijun/minimumichiran/index.html)
                    { year: 2003, wage: 664 }, // MHLW
                    { year: 2004, wage: 665 }, // MHLW
                    { year: 2005, wage: 668 }, // MHLW
                    { year: 2006, wage: 673 }, // MHLW
                    { year: 2007, wage: 687 }, // MHLW
                    { year: 2008, wage: 703 }, // MHLW
                    { year: 2009, wage: 713 }, // MHLW
                    { year: 2010, wage: 730 }, // MHLW
                    { year: 2011, wage: 737 }, // MHLW
                    { year: 2012, wage: 749 }, // MHLW
                    { year: 2013, wage: 764 }, // MHLW
                    { year: 2014, wage: 780 }, // MHLW
                    { year: 2015, wage: 798 }, // MHLW
                    { year: 2016, wage: 823 }, // MHLW
                    { year: 2017, wage: 848 }, // MHLW
                    { year: 2018, wage: 874 }, // MHLW
                    { year: 2019, wage: 901 }, // MHLW
                    { year: 2020, wage: 902 }, // MHLW
                    { year: 2021, wage: 930 }, // MHLW
                    { year: 2022, wage: 961 }, // MHLW
                    { year: 2023, wage: 1004 }, // MHLW[](https://www.mhlw.go.jp/stf/seisakunitsuite/bunya/koyou_roudou/roudoukijun/minimumichiran/index.html)
                    { year: 2024, wage: 1050 } // Projected, based on 4-5% annual increase
                ],
                averageWageData: [
                    { year: 1974, wage: 129800 }, // MHLW, Wage Structure Survey[](https://www.e-stat.go.jp/stat-search?page=1&survey=%25E6%25B0%2591%25E9%2596%2593%25E3%2580%2582&toukei=00450091)
                    { year: 1975, wage: 145000 }, // MHLW
                    { year: 1976, wage: 158700 }, // MHLW
                    { year: 1977, wage: 172100 }, // MHLW
                    { year: 1978, wage: 184300 }, // MHLW
                    { year: 1979, wage: 195600 }, // MHLW
                    { year: 1980, wage: 207200 }, // MHLW
                    { year: 1981, wage: 219300 }, // MHLW
                    { year: 1982, wage: 230300 }, // MHLW
                    { year: 1983, wage: 239700 }, // MHLW
                    { year: 1984, wage: 249400 }, // MHLW
                    { year: 1985, wage: 258900 }, // MHLW
                    { year: 1986, wage: 267800 }, // MHLW
                    { year: 1987, wage: 276900 }, // MHLW
                    { year: 1988, wage: 287400 }, // MHLW
                    { year: 1989, wage: 300100 }, // MHLW
                    { year: 1990, wage: 315200 }, // MHLW
                    { year: 1991, wage: 330800 }, // MHLW
                    { year: 1992, wage: 344900 }, // MHLW
                    { year: 1993, wage: 353700 }, // MHLW
                    { year: 1994, wage: 360900 }, // MHLW
                    { year: 1995, wage: 367900 }, // MHLW
                    { year: 1996, wage: 373200 }, // MHLW
                    { year: 1997, wage: 378700 }, // MHLW
                    { year: 1998, wage: 380100 }, // MHLW
                    { year: 1999, wage: 381200 }, // MHLW
                    { year: 2000, wage: 382500 }, // MHLW
                    { year: 2001, wage: 383200 }, // MHLW
                    { year: 2002, wage: 381900 }, // MHLW
                    { year: 2003, wage: 380600 }, // MHLW
                    { year: 2004, wage: 378900 }, // MHLW
                    { year: 2005, wage: 377800 }, // MHLW
                    { year: 2006, wage: 376900 }, // MHLW
                    { year: 2007, wage: 378200 }, // MHLW
                    { year: 2008, wage: 378900 }, // MHLW
                    { year: 2009, wage: 372400 }, // MHLW
                    { year: 2010, wage: 370300 }, // MHLW
                    { year: 2011, wage: 369700 }, // MHLW
                    { year: 2012, wage: 368400 }, // MHLW
                    { year: 2013, wage: 368100 }, // MHLW
                    { year: 2014, wage: 369300 }, // MHLW
                    { year: 2015, wage: 371200 }, // MHLW
                    { year: 2016, wage: 373100 }, // MHLW
                    { year: 2017, wage: 376300 }, // MHLW
                    { year: 2018, wage: 380200 }, // MHLW
                    { year: 2019, wage: 383600 }, // MHLW
                    { year: 2020, wage: 381900 }, // MHLW
                    { year: 2021, wage: 382800 }, // MHLW
                    { year: 2022, wage: 386700 }, // MHLW
                    { year: 2023, wage: 394500 }, // MHLW[](https://www.mhlw.go.jp/toukei/itiran/roudou/chingin/kouzou/z2022/index.html)
                    { year: 2024, wage: 400000 } // Projected, based on 2% increase[](https://www.nikkei.com/article/DGXZQOUA086X80Y5A100C2000000/)
                ],
                cpiData: [
                    { year: 1974, cpi: 37.2 }, // Rebasing from 2020=100, Statistics Bureau
                    { year: 1975, cpi: 41.5 }, // Rebasing
                    { year: 1976, cpi: 45.4 },
                    { year: 1977, cpi: 49.1 },
                    { year: 1978, cpi: 51.2 },
                    { year: 1979, cpi: 53.1 },
                    { year: 1980, cpi: 57.2 },
                    { year: 1981, cpi: 60.0 },
                    { year: 1982, cpi: 61.7 },
                    { year: 1983, cpi: 62.9 },
                    { year: 1984, cpi: 64.3 },
                    { year: 1985, cpi: 65.6 },
                    { year: 1986, cpi: 66.0 },
                    { year: 1987, cpi: 66.2 },
                    { year: 1988, cpi: 66.6 },
                    { year: 1989, cpi: 68.2 },
                    { year: 1990, cpi: 70.3 },
                    { year: 1991, cpi: 72.6 },
                    { year: 1992, cpi: 73.8 },
                    { year: 1993, cpi: 74.7 },
                    { year: 1994, cpi: 75.2 },
                    { year: 1995, cpi: 75.1 },
                    { year: 1996, cpi: 75.2 },
                    { year: 1997, cpi: 76.6 },
                    { year: 1998, cpi: 77.1 },
                    { year: 1999, cpi: 76.8 },
                    { year: 2000, cpi: 76.3 },
                    { year: 2001, cpi: 75.7 },
                    { year: 2002, cpi: 75.0 },
                    { year: 2003, cpi: 74.7 },
                    { year: 2004, cpi: 74.7 },
                    { year: 2005, cpi: 74.4 },
                    { year: 2006, cpi: 74.6 },
                    { year: 2007, cpi: 74.7 },
                    { year: 2008, cpi: 75.7 },
                    { year: 2009, cpi: 74.7 },
                    { year: 2010, cpi: 74.1 },
                    { year: 2011, cpi: 73.9 },
                    { year: 2012, cpi: 73.9 },
                    { year: 2013, cpi: 74.2 },
                    { year: 2014, cpi: 76.3 },
                    { year: 2015, cpi: 77.1 },
                    { year: 2016, cpi: 77.0 },
                    { year: 2017, cpi: 77.4 },
                    { year: 2018, cpi: 78.2 },
                    { year: 2019, cpi: 78.7 },
                    { year: 2020, cpi: 78.7 },
                    { year: 2021, cpi: 78.5 },
                    { year: 2022, cpi: 80.5 },
                    { year: 2023, cpi: 83.0 }, // Statistics Bureau[](https://www.e-stat.go.jp/stat-search/files?stat_infid=000040165559)
                    { year: 2024, cpi: 100.0 } // Base year, projected[](https://www.stat.go.jp/data/cpi/sokuhou/tsuki/index-z.html)
                ],
                riceProductionData: [
                    { year: 1974, production: 12625000 }, // MAFF, metric tons
                    { year: 1975, production: 13147000 }, // MAFF
                    { year: 1976, production: 12896000 },
                    { year: 1977, production: 12672000 },
                    { year: 1978, production: 12489000 },
                    { year: 1979, production: 11992000 },
                    { year: 1980, production: 10460000 },
                    { year: 1981, production: 10889000 },
                    { year: 1982, production: 10979000 },
                    { year: 1983, production: 11429000 },
                    { year: 1984, production: 12325000 },
                    { year: 1985, production: 11568000 },
                    { year: 1986, production: 11205000 },
                    { year: 1987, production: 10878000 },
                    { year: 1988, production: 10745000 },
                    { year: 1989, production: 10807000 },
                    { year: 1990, production: 10250000 },
                    { year: 1991, production: 10011000 },
                    { year: 1992, production: 10151000 },
                    { year: 1993, production: 8288000 },
                    { year: 1994, production: 10545000 },
                    { year: 1995, production: 10479000 },
                    { year: 1996, production: 9575000 },
                    { year: 1997, production: 9405000 },
                    { year: 1998, production: 8993000 },
                    { year: 1999, production: 9045000 },
                    { year: 2000, production: 9006000 },
                    { year: 2001, production: 8814000 },
                    { year: 2002, production: 8764000 },
                    { year: 2003, production: 8247000 },
                    { year: 2004, production: 8931000 },
                    { year: 2005, production: 8739000 },
                    { year: 2006, production: 8589000 },
                    { year: 2007, production: 8585000 },
                    { year: 2008, production: 8747000 },
                    { year: 2009, production: 8631000 },
                    { year: 2010, production: 8566000 },
                    { year: 2011, production: 8492000 },
                    { year: 2012, production: 8507000 },
                    { year: 2013, production: 8496000 },
                    { year: 2014, production: 8433000 },
                    { year: 2015, production: 8389000 },
                    { year: 2016, production: 8331000 },
                    { year: 2017, production: 7973000 },
                    { year: 2018, production: 7819000 },
                    { year: 2019, production: 7543000 },
                    { year: 2020, production: 7657000 },
                    { year: 2021, production: 7599000 },
                    { year: 2022, production: 7372000 },
                    { year: 2023, production: 7308000 }, // MAFF[](https://www.maff.go.jp/j/syouan/keikaku/soukatu/r6_kome_ryutu.html)
                    { year: 2024, production: 7250000 } // Projected, based on trend
                ],
                monthlyTouristData: [
                    // Data from JNTO (Japan National Tourism Organization), number of visitors
                    // 2020
                    { year: 2020, month: 1, tourists: 2661092 },
                    { year: 2020, month: 2, tourists: 1085180 },
                    { year: 2020, month: 3, tourists: 193732 },
                    { year: 2020, month: 4, tourists: 2917 },
                    { year: 2020, month: 5, tourists: 1663 },
                    { year: 2020, month: 6, tourists: 2639 },
                    { year: 2020, month: 7, tourists: 3822 },
                    { year: 2020, month: 8, tourists: 8740 },
                    { year: 2020, month: 9, tourists: 13745 },
                    { year: 2020, month: 10, tourists: 27421 },
                    { year: 2020, month: 11, tourists: 56711 },
                    { year: 2020, month: 12, tourists: 66532 },
                    // 2021
                    { year: 2021, month: 1, tourists: 46464 },
                    { year: 2021, month: 2, tourists: 7370 },
                    { year: 2021, month: 3, tourists: 12184 },
                    { year: 2021, month: 4, tourists: 10892 },
                    { year: 2021, month: 5, tourists: 10323 },
                    { year: 2021, month: 6, tourists: 9338 },
                    { year: 2021, month: 7, tourists: 51097 },
                    { year: 2021, month: 8, tourists: 25916 },
                    { year: 2021, month: 9, tourists: 17786 },
                    { year: 2021, month: 10, tourists: 22097 },
                    { year: 2021, month: 11, tourists: 20653 },
                    { year: 2021, month: 12, tourists: 12123 },
                    // 2022
                    { year: 2022, month: 1, tourists: 17867 },
                    { year: 2022, month: 2, tourists: 16744 },
                    { year: 2022, month: 3, tourists: 66121 },
                    { year: 2022, month: 4, tourists: 139502 },
                    { year: 2022, month: 5, tourists: 147469 },
                    { year: 2022, month: 6, tourists: 120427 },
                    { year: 2022, month: 7, tourists: 144502 },
                    { year: 2022, month: 8, tourists: 169801 },
                    { year: 2022, month: 9, tourists: 206499 },
                    { year: 2022, month: 10, tourists: 498620 },
                    { year: 2022, month: 11, tourists: 934513 },
                    { year: 2022, month: 12, tourists: 1370043 },
                    // 2023
                    { year: 2023, month: 1, tourists: 1497475 },
                    { year: 2023, month: 2, tourists: 1475294 },
                    { year: 2023, month: 3, tourists: 1817539 },
                    { year: 2023, month: 4, tourists: 1949141 },
                    { year: 2023, month: 5, tourists: 1898858 },
                    { year: 2023, month: 6, tourists: 2073289 },
                    { year: 2023, month: 7, tourists: 2320649 },
                    { year: 2023, month: 8, tourists: 2156903 },
                    { year: 2023, month: 9, tourists: 2184394 },
                    { year: 2023, month: 10, tourists: 2516489 },
                    { year: 2023, month: 11, tourists: 2440798 },
                    { year: 2023, month: 12, tourists: 2733979 },
                    // 2024
                    { year: 2024, month: 1, tourists: 2688081 },
                    { year: 2024, month: 2, tourists: 2788019 },
                    { year: 2024, month: 3, tourists: 3081585 },
                    { year: 2024, month: 4, tourists: 3042894 },
                    { year: 2024, month: 5, tourists: 3040119 },
                ],
                //// Prefectures (2024)
                "prefectureStats": {
                    // Note on data:
                    // Created based on the latest available public statistics as of 2025.
                    // Therefore, the reference point for the data is either 2023 or 2024, depending on the item.
                    "Hokkaido": {
                        "population": 5078979,
                        "companies": 147575,
                        "accidents": 26233,
                        "crimes": 26978,
                        "suicides": 1045,
                        "scams": 1095,
                        "foreignResidents": 49419,
                        "foreignTourists": 5396650,
                        "birthRate": 0.55,
                        "chainStores": 2322
                    },
                    "Aomori": {
                        "population": 1178655,
                        "companies": 34107,
                        "accidents": 4065,
                        "crimes": 4331,
                        "suicides": 284,
                        "scams": 184,
                        "foreignResidents": 9140,
                        "foreignTourists": 310570,
                        "birthRate": 0.54,
                        "chainStores": 539
                    },
                    "Iwate": {
                        "population": 1157106,
                        "companies": 33719,
                        "accidents": 2801,
                        "crimes": 3822,
                        "suicides": 279,
                        "scams": 107,
                        "foreignResidents": 8325,
                        "foreignTourists": 263920,
                        "birthRate": 0.53,
                        "chainStores": 541
                    },
                    "Miyagi": {
                        "population": 2261793,
                        "companies": 63148,
                        "accidents": 5851,
                        "crimes": 9385,
                        "suicides": 404,
                        "scams": 421,
                        "foreignResidents": 29993,
                        "foreignTourists": 802710,
                        "birthRate": 0.61,
                        "chainStores": 1024
                    },
                    "Akita": {
                        "population": 894165,
                        "companies": 26490,
                        "accidents": 2472,
                        "crimes": 2855,
                        "suicides": 245,
                        "scams": 84,
                        "foreignResidents": 6386,
                        "foreignTourists": 223940,
                        "birthRate": 0.49,
                        "chainStores": 424
                    },
                    "Yamagata": {
                        "population": 1012920,
                        "companies": 31131,
                        "accidents": 3009,
                        "crimes": 3672,
                        "suicides": 221,
                        "scams": 147,
                        "foreignResidents": 8182,
                        "foreignTourists": 304600,
                        "birthRate": 0.54,
                        "chainStores": 479
                    },
                    "Fukushima": {
                        "population": 1755142,
                        "companies": 51221,
                        "accidents": 5764,
                        "crimes": 6699,
                        "suicides": 404,
                        "scams": 423,
                        "foreignResidents": 20040,
                        "foreignTourists": 432320,
                        "birthRate": 0.59,
                        "chainStores": 832
                    },
                    "Ibaraki": {
                        "population": 2821677,
                        "companies": 79192,
                        "accidents": 10186,
                        "crimes": 14931,
                        "suicides": 512,
                        "scams": 651,
                        "foreignResidents": 53975,
                        "foreignTourists": 597250,
                        "birthRate": 0.60,
                        "chainStores": 1290
                    },
                    "Tochigi": {
                        "population": 1893110,
                        "companies": 54930,
                        "accidents": 6712,
                        "crimes": 9046,
                        "suicides": 388,
                        "scams": 369,
                        "foreignResidents": 43292,
                        "foreignTourists": 535130,
                        "birthRate": 0.60,
                        "chainStores": 901
                    },
                    "Gunma": {
                        "population": 1894034,
                        "companies": 55209,
                        "accidents": 7268,
                        "crimes": 10283,
                        "suicides": 360,
                        "scams": 454,
                        "foreignResidents": 65163,
                        "foreignTourists": 561260,
                        "birthRate": 0.58,
                        "chainStores": 887
                    },
                    "Saitama": {
                        "population": 7328131,
                        "companies": 203893,
                        "accidents": 23145,
                        "crimes": 40010,
                        "suicides": 1172,
                        "scams": 1894,
                        "foreignResidents": 230737,
                        "foreignTourists": 1515900,
                        "birthRate": 0.64,
                        "chainStores": 3103
                    },
                    "Chiba": {
                        "population": 6271295,
                        "companies": 169826,
                        "accidents": 18366,
                        "crimes": 31846,
                        "suicides": 1004,
                        "scams": 1845,
                        "foreignResidents": 171485,
                        "foreignTourists": 4181410,
                        "birthRate": 0.65,
                        "chainStores": 2715
                    },
                    "Tokyo": {
                        "population": 14134547,
                        "companies": 429384,
                        "accidents": 26365,
                        "crimes": 88373,
                        "suicides": 2289,
                        "scams": 3894,
                        "foreignResidents": 663344,
                        "foreignTourists": 33405310,
                        "birthRate": 0.72,
                        "chainStores": 7462
                    },
                    "Kanagawa": {
                        "population": 9235087,
                        "companies": 251644,
                        "accidents": 23904,
                        "crimes": 43218,
                        "suicides": 1391,
                        "scams": 2146,
                        "foreignResidents": 257523,
                        "foreignTourists": 4110900,
                        "birthRate": 0.63,
                        "chainStores": 3791
                    },
                    "Niigata": {
                        "population": 2120610,
                        "companies": 63605,
                        "accidents": 7578,
                        "crimes": 7128,
                        "suicides": 442,
                        "scams": 242,
                        "foreignResidents": 23414,
                        "foreignTourists": 489370,
                        "birthRate": 0.55,
                        "chainStores": 969
                    },
                    "Toyama": {
                        "population": 991666,
                        "companies": 32363,
                        "accidents": 3169,
                        "crimes": 3505,
                        "suicides": 177,
                        "scams": 114,
                        "foreignResidents": 16930,
                        "foreignTourists": 607140,
                        "birthRate": 0.61,
                        "chainStores": 462
                    },
                    "Ishikawa": {
                        "population": 1102927,
                        "companies": 35246,
                        "accidents": 3277,
                        "crimes": 4130,
                        "suicides": 176,
                        "scams": 147,
                        "foreignResidents": 15462,
                        "foreignTourists": 864980,
                        "birthRate": 0.67,
                        "chainStores": 504
                    },
                    "Fukui": {
                        "population": 736787,
                        "companies": 24250,
                        "accidents": 2779,
                        "crimes": 2496,
                        "suicides": 130,
                        "scams": 60,
                        "foreignResidents": 12561,
                        "foreignTourists": 247290,
                        "birthRate": 0.69,
                        "chainStores": 341
                    },
                    "Yamanashi": {
                        "population": 794300,
                        "companies": 23828,
                        "accidents": 2883,
                        "crimes": 3816,
                        "suicides": 169,
                        "scams": 147,
                        "foreignResidents": 18128,
                        "foreignTourists": 1438200,
                        "birthRate": 0.62,
                        "chainStores": 409
                    },
                    "Nagano": {
                        "population": 1990422,
                        "companies": 61163,
                        "accidents": 6414,
                        "crimes": 7367,
                        "suicides": 372,
                        "scams": 295,
                        "foreignResidents": 39537,
                        "foreignTourists": 1479830,
                        "birthRate": 0.60,
                        "chainStores": 914
                    },
                    "Gifu": {
                        "population": 1912822,
                        "companies": 58213,
                        "accidents": 8186,
                        "crimes": 8629,
                        "suicides": 307,
                        "scams": 409,
                        "foreignResidents": 65005,
                        "foreignTourists": 1040510,
                        "birthRate": 0.63,
                        "chainStores": 887
                    },
                    "Shizuoka": {
                        "population": 3543160,
                        "companies": 109597,
                        "accidents": 14619,
                        "crimes": 15154,
                        "suicides": 604,
                        "scams": 531,
                        "foreignResidents": 110191,
                        "foreignTourists": 1980830,
                        "birthRate": 0.61,
                        "chainStores": 1695
                    },
                    "Aichi": {
                        "population": 7480579,
                        "companies": 232677,
                        "accidents": 32314,
                        "crimes": 41819,
                        "suicides": 1133,
                        "scams": 1307,
                        "foreignResidents": 304273,
                        "foreignTourists": 4363230,
                        "birthRate": 0.71,
                        "chainStores": 3290
                    },
                    "Mie": {
                        "population": 1691136,
                        "companies": 49451,
                        "accidents": 6516,
                        "crimes": 7474,
                        "suicides": 289,
                        "scams": 251,
                        "foreignResidents": 59714,
                        "foreignTourists": 636380,
                        "birthRate": 0.64,
                        "chainStores": 832
                    },
                    "Shiga": {
                        "population": 1406606,
                        "companies": 37494,
                        "accidents": 4725,
                        "crimes": 5419,
                        "suicides": 188,
                        "scams": 247,
                        "foreignResidents": 35147,
                        "foreignTourists": 668910,
                        "birthRate": 0.74,
                        "chainStores": 618
                    },
                    "Kyoto": {
                        "population": 2521568,
                        "companies": 79298,
                        "accidents": 8202,
                        "crimes": 12590,
                        "suicides": 396,
                        "scams": 436,
                        "foreignResidents": 116248,
                        "foreignTourists": 8696880,
                        "birthRate": 0.63,
                        "chainStores": 1252
                    },
                    "Osaka": {
                        "population": 8762744,
                        "companies": 285499,
                        "accidents": 27170,
                        "crimes": 73385,
                        "suicides": 1282,
                        "scams": 2473,
                        "foreignResidents": 290176,
                        "foreignTourists": 14949240,
                        "birthRate": 0.68,
                        "chainStores": 4220
                    },
                    "Hyogo": {
                        "population": 5360980,
                        "companies": 153093,
                        "accidents": 19283,
                        "crimes": 29775,
                        "suicides": 864,
                        "scams": 1544,
                        "foreignResidents": 122240,
                        "foreignTourists": 2796240,
                        "birthRate": 0.64,
                        "chainStores": 2420
                    },
                    "Nara": {
                        "population": 1286955,
                        "companies": 33267,
                        "accidents": 4337,
                        "crimes": 5046,
                        "suicides": 210,
                        "scams": 201,
                        "foreignResidents": 24391,
                        "foreignTourists": 694030,
                        "birthRate": 0.61,
                        "chainStores": 531
                    },
                    "Wakayama": {
                        "population": 883015,
                        "companies": 25150,
                        "accidents": 3012,
                        "crimes": 3922,
                        "suicides": 189,
                        "scams": 104,
                        "foreignResidents": 11210,
                        "foreignTourists": 388700,
                        "birthRate": 0.59,
                        "chainStores": 440
                    },
                    "Tottori": {
                        "population": 532353,
                        "companies": 14751,
                        "accidents": 1729,
                        "crimes": 1809,
                        "suicides": 98,
                        "scams": 27,
                        "foreignResidents": 4940,
                        "foreignTourists": 219710,
                        "birthRate": 0.72,
                        "chainStores": 258
                    },
                    "Shimane": {
                        "population": 636306,
                        "companies": 18788,
                        "accidents": 1851,
                        "crimes": 1921,
                        "suicides": 119,
                        "scams": 47,
                        "foreignResidents": 6696,
                        "foreignTourists": 305410,
                        "birthRate": 0.70,
                        "chainStores": 302
                    },
                    "Okayama": {
                        "population": 1837422,
                        "companies": 51227,
                        "accidents": 7288,
                        "crimes": 7924,
                        "suicides": 288,
                        "scams": 236,
                        "foreignResidents": 35052,
                        "foreignTourists": 902100,
                        "birthRate": 0.69,
                        "chainStores": 881
                    },
                    "Hiroshima": {
                        "population": 2731872,
                        "companies": 79574,
                        "accidents": 8527,
                        "crimes": 11624,
                        "suicides": 429,
                        "scams": 380,
                        "foreignResidents": 66827,
                        "foreignTourists": 1713430,
                        "birthRate": 0.69,
                        "chainStores": 1282
                    },
                    "Yamaguchi": {
                        "population": 1285223,
                        "companies": 37785,
                        "accidents": 4768,
                        "crimes": 5240,
                        "suicides": 270,
                        "scams": 176,
                        "foreignResidents": 20188,
                        "foreignTourists": 436320,
                        "birthRate": 0.61,
                        "chainStores": 616
                    },
                    "Tokushima": {
                        "population": 688176,
                        "companies": 20436,
                        "accidents": 2321,
                        "crimes": 2838,
                        "suicides": 139,
                        "scams": 71,
                        "foreignResidents": 7266,
                        "foreignTourists": 268950,
                        "birthRate": 0.62,
                        "chainStores": 326
                    },
                    "Kagawa": {
                        "population": 914713,
                        "companies": 27806,
                        "accidents": 4212,
                        "crimes": 4125,
                        "suicides": 161,
                        "scams": 108,
                        "foreignResidents": 14758,
                        "foreignTourists": 714900,
                        "birthRate": 0.66,
                        "chainStores": 462
                    },
                    "Ehime": {
                        "population": 1270929,
                        "companies": 39599,
                        "accidents": 5313,
                        "crimes": 5358,
                        "suicides": 235,
                        "scams": 182,
                        "foreignResidents": 15510,
                        "foreignTourists": 624170,
                        "birthRate": 0.60,
                        "chainStores": 618
                    },
                    "Kochi": {
                        "population": 657805,
                        "companies": 20286,
                        "accidents": 2269,
                        "crimes": 2826,
                        "suicides": 137,
                        "scams": 65,
                        "foreignResidents": 5373,
                        "foreignTourists": 297530,
                        "birthRate": 0.58,
                        "chainStores": 337
                    },
                    "Fukuoka": {
                        "population": 5104921,
                        "companies": 149377,
                        "accidents": 19137,
                        "crimes": 29281,
                        "suicides": 760,
                        "scams": 984,
                        "foreignResidents": 99426,
                        "foreignTourists": 4579160,
                        "birthRate": 0.75,
                        "chainStores": 2383
                    },
                    "Saga": {
                        "population": 790409,
                        "companies": 22123,
                        "accidents": 3378,
                        "crimes": 3302,
                        "suicides": 137,
                        "scams": 104,
                        "foreignResidents": 11048,
                        "foreignTourists": 387340,
                        "birthRate": 0.77,
                        "chainStores": 387
                    },
                    "Nagasaki": {
                        "population": 1251842,
                        "companies": 34966,
                        "accidents": 3986,
                        "crimes": 4339,
                        "suicides": 234,
                        "scams": 132,
                        "foreignResidents": 17294,
                        "foreignTourists": 735280,
                        "birthRate": 0.69,
                        "chainStores": 569
                    },
                    "Kumamoto": {
                        "population": 1691147,
                        "companies": 47683,
                        "accidents": 6496,
                        "crimes": 6578,
                        "suicides": 310,
                        "scams": 254,
                        "foreignResidents": 28913,
                        "foreignTourists": 864550,
                        "birthRate": 0.77,
                        "chainStores": 808
                    },
                    "Oita": {
                        "population": 1077741,
                        "companies": 31336,
                        "accidents": 4296,
                        "crimes": 4310,
                        "suicides": 213,
                        "scams": 145,
                        "foreignResidents": 18055,
                        "foreignTourists": 1016890,
                        "birthRate": 0.70,
                        "chainStores": 512
                    },
                    "Miyazaki": {
                        "population": 1034079,
                        "companies": 28557,
                        "accidents": 3757,
                        "crimes": 4192,
                        "suicides": 231,
                        "scams": 111,
                        "foreignResidents": 13024,
                        "foreignTourists": 407000,
                        "birthRate": 0.78,
                        "chainStores": 489
                    },
                    "Kagoshima": {
                        "population": 1532070,
                        "companies": 43900,
                        "accidents": 6185,
                        "crimes": 6698,
                        "suicides": 313,
                        "scams": 176,
                        "foreignResidents": 17826,
                        "foreignTourists": 717200,
                        "birthRate": 0.81,
                        "chainStores": 746
                    },
                    "Okinawa": {
                        "population": 1471373,
                        "companies": 38385,
                        "accidents": 4578,
                        "crimes": 6710,
                        "suicides": 226,
                        "scams": 158,
                        "foreignResidents": 24040,
                        "foreignTourists": 3834600,
                        "birthRate": 0.95,
                        "chainStores": 722
                    }
                },
                //// Prefecture Rankings (2024)
                prefectureRanking: {
                    // Hokkaido & Tohoku
                    'Hokkaido': {
                        Food: {
                            gyozaConsumption: { ranking: 45, value: 2000 },
                            vegetableProduction: { ranking: 1, value: 4200 },
                            fishCatch: { ranking: 1, value: 1200000 },
                            livestockProduction: { ranking: 3, value: 9000 }
                        },
                        Life: {
                            pachinkoParlors: { ranking: 2, value: 300 },
                            tobaccoConsumption: { ranking: 1, value: 2200 },
                            strayCatCount: { ranking: 9, value: 1045 }
                        }
                    },
                    'Aomori': {
                        Life: {
                            averageRent: { ranking: 47, value: 35000 },
                            tobaccoConsumption: { ranking: 2, value: 2150 },
                            strayCatCount: { ranking: 28, value: 411 }
                        }
                    },
                    'Iwate': {
                        Food: {
                            octopusConsumption: { ranking: 47, value: 500 },
                            alcoholConsumption: { ranking: 2, value: 8.5 }
                        },
                        Life: { strayCatCount: { ranking: 37, value: 289 } }
                    },
                    'Miyagi': {
                        Food: { ramenConsumption: { ranking: 3, value: 12487 } },
                        Life: { strayCatCount: { ranking: 14, value: 752 } }
                    },
                    'Akita': {
                        Life: { strayCatCount: { ranking: 42, value: 215 } }
                    },
                    'Yamagata': {
                        Food: {
                            ramenConsumption: { ranking: 1, value: 13196 },
                            octopusConsumption: { ranking: 45, value: 600 }
                        },
                        Life: { strayCatCount: { ranking: 43, value: 198 } }
                    },
                    'Fukushima': {
                        Life: { strayCatCount: { ranking: 15, value: 711 } }
                    },
                    // Kanto
                    'Ibaraki': {
                        Food: { vegetableProduction: { ranking: 2, value: 2500 } },
                        Life: { strayCatCount: { ranking: 10, value: 987 } }
                    },
                    'Tochigi': {
                        Food: {
                            sushiConsumption: { ranking: 1, value: 5234 },
                            gyozaConsumption: { ranking: 2, value: 4193 },
                            fishCatch: { ranking: 47, value: 0 }
                        },
                        Life: { strayCatCount: { ranking: 26, value: 440 } }
                    },
                    'Gunma': {
                        Food: { fishCatch: { ranking: 47, value: 0 } },
                        Life: { strayCatCount: { ranking: 23, value: 499 } }
                    },
                    'Saitama': {
                        Food: { spiceConsumption: { ranking: 1, value: 500 }, fishCatch: { ranking: 47, value: 0 } },
                        Life: { strayCatCount: { ranking: 6, value: 1421 } }
                    },
                    'Chiba': {
                        Food: { spiceConsumption: { ranking: 2, value: 480 }, vegetableProduction: { ranking: 3, value: 2000 } },
                        Life: { strayCatCount: { ranking: 7, value: 1358 } }
                    },
                    'Tokyo': {
                        Food: {
                            alcoholConsumption: { ranking: 1, value: 9.0 },
                            vegetableProduction: { ranking: 47, value: 10 },
                            livestockProduction: { ranking: 46, value: 20 }
                        },
                        Life: {
                            averageRent: { ranking: 1, value: 85000 },
                            strayCatCount: { ranking: 1, value: 2347 }
                        }
                    },
                    'Kanagawa': {
                        Food: { livestockProduction: { ranking: 45, value: 30 } },
                        Life: {
                            averageRent: { ranking: 2, value: 70000 },
                            strayCatCount: { ranking: 5, value: 1598 }
                        }
                    },
                    // Chubu
                    'Niigata': {
                        Food: { ramenConsumption: { ranking: 2, value: 12534 } },
                        Life: { strayCatCount: { ranking: 25, value: 452 } }
                    },
                    'Toyama': {
                        Food: { sushiConsumption: { ranking: 2, value: 5123 }, fishCatch: { ranking: 45, value: 500 } },
                        Life: { strayCatCount: { ranking: 45, value: 174 } }
                    },
                    'Ishikawa': {
                        Food: { sushiConsumption: { ranking: 3, value: 5012 } },
                        Life: { strayCatCount: { ranking: 41, value: 230 } }
                    },
                    'Fukui': {
                        Food: { vegetableProduction: { ranking: 45, value: 50 } },
                        Life: {
                            pachinkoParlors: { ranking: 45, value: 20 },
                            strayCatCount: { ranking: 46, value: 169 }
                        }
                    },
                    'Yamanashi': {
                        Food: { fishCatch: { ranking: 47, value: 0 } },
                        Life: { strayCatCount: { ranking: 40, value: 234 } }
                    },
                    'Nagano': {
                        Food: { fishCatch: { ranking: 47, value: 0 } },
                        Life: { strayCatCount: { ranking: 27, value: 433 } }
                    },
                    'Gifu': {
                        Food: { fishCatch: { ranking: 47, value: 0 } },
                        Life: { strayCatCount: { ranking: 22, value: 510 } }
                    },
                    'Shizuoka': {
                        Food: { gyozaConsumption: { ranking: 3, value: 4056 }, fishCatch: { ranking: 3, value: 80000 } },
                        Life: { strayCatCount: { ranking: 11, value: 955 } }
                    },
                    'Aichi': {
                        Food: { alcoholConsumption: { ranking: 45, value: 6.0 } },
                        Life: {
                            pachinkoParlors: { ranking: 3, value: 280 },
                            strayCatCount: { ranking: 4, value: 1655 }
                        }
                    },
                    // Kansai
                    'Mie': {
                        Life: { strayCatCount: { ranking: 18, value: 601 } }
                    },
                    'Shiga': {
                        Food: { ramenConsumption: { ranking: 45, value: 6000 }, fishCatch: { ranking: 47, value: 0 } },
                        Life: {
                            tobaccoConsumption: { ranking: 46, value: 1500 },
                            strayCatCount: { ranking: 31, value: 349 }
                        }
                    },
                    'Kyoto': {
                        Food: { octopusConsumption: { ranking: 2, value: 1500 }, spiceConsumption: { ranking: 3, value: 450 }, fishCatch: { ranking: 46, value: 100 } },
                        Life: {
                            tobaccoConsumption: { ranking: 45, value: 1550 },
                            strayCatCount: { ranking: 16, value: 672 }
                        }
                    },
                    'Osaka': {
                        Food: {
                            octopusConsumption: { ranking: 1, value: 1600 },
                            alcoholConsumption: { ranking: 46, value: 5.8 },
                            vegetableProduction: { ranking: 46, value: 20 },
                            livestockProduction: { ranking: 47, value: 10 }
                        },
                        Life: {
                            averageRent: { ranking: 3, value: 65000 },
                            pachinkoParlors: { ranking: 1, value: 400 },
                            strayCatCount: { ranking: 2, value: 1878 }
                        }
                    },
                    'Hyogo': {
                        Food: { gyozaConsumption: { ranking: 46, value: 1900 }, octopusConsumption: { ranking: 3, value: 1450 } },
                        Life: { strayCatCount: { ranking: 8, value: 1290 } }
                    },
                    'Nara': {
                        Food: { ramenConsumption: { ranking: 46, value: 5800 }, alcoholConsumption: { ranking: 47, value: 5.5 }, fishCatch: { ranking: 47, value: 0 } },
                        Life: {
                            tobaccoConsumption: { ranking: 47, value: 1400 },
                            strayCatCount: { ranking: 34, value: 321 }
                        }
                    },
                    'Wakayama': {
                        Food: { ramenConsumption: { ranking: 47, value: 5700 }, gyozaConsumption: { ranking: 47, value: 1800 }, spiceConsumption: { ranking: 45, value: 200 } },
                        Life: { strayCatCount: { ranking: 24, value: 473 } }
                    },
                    // Chugoku
                    'Tottori': {
                        Life: {
                            pachinkoParlors: { ranking: 47, value: 15 },
                            strayCatCount: { ranking: 47, value: 135 }
                        }
                    },
                    'Shimane': {
                        Life: {
                            pachinkoParlors: { ranking: 46, value: 18 },
                            strayCatCount: { ranking: 44, value: 183 }
                        }
                    },
                    'Okayama': {
                        Life: { strayCatCount: { ranking: 17, value: 649 } }
                    },
                    'Hiroshima': {
                        Life: { strayCatCount: { ranking: 12, value: 855 } }
                    },
                    'Yamaguchi': {
                        Food: { sushiConsumption: { ranking: 46, value: 3000 } },
                        Life: { strayCatCount: { ranking: 19, value: 589 } }
                    },
                    // Shikoku
                    'Tokushima': {
                        Life: { strayCatCount: { ranking: 38, value: 266 } }
                    },
                    'Kagawa': {
                        Food: { sushiConsumption: { ranking: 47, value: 2900 } },
                        Life: { strayCatCount: { ranking: 21, value: 541 } }
                    },
                    'Ehime': {
                        Life: { strayCatCount: { ranking: 13, value: 768 } }
                    },
                    'Kochi': {
                        Food: { alcoholConsumption: { ranking: 3, value: 8.4 }, spiceConsumption: { ranking: 47, value: 180 } },
                        Life: { strayCatCount: { ranking: 30, value: 367 } }
                    },
                    // Kyushu & Okinawa
                    'Fukuoka': {
                        Life: { strayCatCount: { ranking: 3, value: 1733 } }
                    },
                    'Saga': {
                        Life: { strayCatCount: { ranking: 33, value: 329 } }
                    },
                    'Nagasaki': {
                        Food: { fishCatch: { ranking: 2, value: 90000 } },
                        Life: {
                            tobaccoConsumption: { ranking: 3, value: 2100 },
                            strayCatCount: { ranking: 20, value: 566 }
                        }
                    },
                    'Kumamoto': {
                        Food: { spiceConsumption: { ranking: 46, value: 190 } },
                        Life: { strayCatCount: { ranking: 29, value: 399 } }
                    },
                    'Oita': {
                        Life: { strayCatCount: { ranking: 32, value: 333 } }
                    },
                    'Miyazaki': {
                        Food: { gyozaConsumption: { ranking: 1, value: 4358 }, livestockProduction: { ranking: 2, value: 9500 } },
                        Life: {
                            averageRent: { ranking: 46, value: 38000 },
                            strayCatCount: { ranking: 36, value: 298 }
                        }
                    },
                    'Kagoshima': {
                        Food: { livestockProduction: { ranking: 1, value: 10000 } },
                        Life: {
                            averageRent: { ranking: 45, value: 40000 },
                            strayCatCount: { ranking: 35, value: 311 }
                        }
                    },
                    'Okinawa': {
                        Food: { sushiConsumption: { ranking: 45, value: 3100 }, octopusConsumption: { ranking: 46, value: 550 } },
                        Life: { strayCatCount: { ranking: 39, value: 254 } }
                    }
                },
            },
            computed: {
                rankingDataKeyMap() {
                    const map = {};
                    if (this.displayRankingItems) {
                        Object.values(this.displayRankingItems).forEach(categoryItems => {
                            for (const key in categoryItems) {
                                map[categoryItems[key].label] = key;
                            }
                        });
                    }
                    return map;
                },
                // Helper to convert 'Food'/'Life' to the corresponding object key
                subCategoryKey() {
                    if (this.selectedSubCategory === 'Food') return 'Food';
                    if (this.selectedSubCategory === 'Life') return 'Life';
                    return null;
                },
                currentDisplayRankingItems() {
                    // Check if displayRankingItems exists, just in case
                    if (this.selectedCategory === 'Prefecture Rankings (2024)' && this.displayRankingItems && this.displayRankingItems[this.selectedSubCategory]) {
                        return this.displayRankingItems[this.selectedSubCategory];
                    }
                    return {};
                }
            },
            methods: {
                destroyCharts() {
                    Object.keys(this.chartInstances).forEach(key => {
                        if (this.chartInstances[key]) {
                            this.chartInstances[key].destroy();
                            this.chartInstances[key] = null;
                        }
                    });
                    if (this.panzoomInstance) {
                        this.panzoomInstance.destroy();
                        this.panzoomInstance = null;
                    }
                    // Clear SVG content and remove event listeners
                    this.svgContent = '';
                },
                updateContent() {
                    if (this.selectedCategory !== 'Prefecture Rankings (2024)') {
                        this.selectedSubCategory = '';
                        this.renderCharts();
                    } else {
                        this.selectedSubCategory = this.subCategories[0];
                        this.updateSubCategoryContent();
                    }
                },
                updateSubCategoryContent() {
                    // When the subcategory changes, reset the ranking selection to the first item in the category
                    if (this.selectedCategory === 'Prefecture Rankings (2024)' && this.displayRankingItems[this.selectedSubCategory]) {
                        const rankingLabels = Object.values(this.displayRankingItems[this.selectedSubCategory]).map(item => item.label);
                        if (rankingLabels.length > 0) {
                            this.selectedRankingData = rankingLabels[0];
                        } else {
                            this.selectedRankingData = null;
                        }
                    } else {
                        this.selectedRankingData = null;
                    }
                    this.renderCharts();
                },
                renderCharts() {
                    // Destroy existing charts
                    this.destroyCharts();

                    // Render charts after DOM update
                    this.$nextTick(() => {
                        if (this.selectedCategory === 'Population') {
                            const populationChartEl = document.querySelector('#populationChart');
                            const birthDeathChartEl = document.querySelector('#birthDeathChart');
                            const crimeChartEl = document.querySelector('#crimeChart');
                            const diseaseChartEl = document.querySelector('#diseaseChart');
                            const murderSuicideChartEl = document.querySelector('#murderSuicideChart');
                            const missingPersonsChartEl = document.querySelector('#missingPersonsChart');

                            if (populationChartEl) {
                                this.chartInstances.populationChart = new ApexCharts(populationChartEl, {
                                    chart: { type: 'line', height: 350 },
                                    series: [{ name: 'Population', data: this.populationData.map(d => d.population) }],
                                    xaxis: {
                                        categories: this.populationData.map(d => d.year),
                                        title: { text: 'Year' },
                                        tickAmount: window.innerWidth <= 600 ? 4 : 10,
                                        labels: { formatter: value => Math.round(value) }
                                    },
                                    yaxis: {
                                        title: { text: 'Population (people)' },
                                        labels: {
                                            formatter: value => {
                                                if (value >= 1000000) return (value / 1000000).toFixed(1) + 'M';
                                                if (value >= 1000) return Math.round(value / 1000) + 'K';
                                                return value;
                                            }
                                        }
                                    },
                                    stroke: {
                                        curve: 'smooth', // 線を滑らかに
                                    },
                                });
                                this.chartInstances.populationChart.render();
                            }

                            if (birthDeathChartEl) {
                                this.chartInstances.birthDeathChart = new ApexCharts(birthDeathChartEl, {
                                    chart: { type: 'line', height: 350 },
                                    series: [
                                        { name: 'Births', data: this.birthDeathData.map(d => d.births) },
                                        { name: 'Deaths', data: this.birthDeathData.map(d => d.deaths) }
                                    ],
                                    colors: ['#008FFB', '#00E396'],
                                    tooltip: {
                                        custom: ({ series, seriesIndex, dataPointIndex, w }) => {
                                            const allSeries = w.config.series.map((s, i) => ({
                                                name: s.name,
                                                value: s.data[dataPointIndex],
                                                color: w.config.colors[i]
                                            }));
                                            allSeries.sort((a, b) => b.value - a.value);
                                            let tooltipHTML = `<div class="apex-tooltip-custom" style="background: #fff; padding: 0px; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">`;
                                            tooltipHTML += `<div style="font-size: 12px; color: rgba(0, 0, 0, .6); padding: 6px; margin-bottom: 10px; background: #ECEFF1;">${w.globals.categoryLabels[dataPointIndex]}</div>`;
                                            allSeries.forEach(s => {
                                                tooltipHTML += `
                                                    <div style="display: flex; align-items: center; padding: 0px 10px 10px 10px;">
                                                    <span style="display:inline-block;width:12px;height:12px;background-color:${s.color}; border-radius:50%; margin-right: 10px;"></span>
                                                    <span style="font-size:12px;">${s.name}: <span style="font-weight:bold;">${s.value >= 1000000 ? (s.value / 1000000).toFixed(1) + 'M' : s.value >= 1000 ? Math.round(s.value / 1000) + 'K' : s.value}</span></span>
                                                    </div>`;
                                            });
                                            tooltipHTML += `</div>`;
                                            return tooltipHTML;
                                        }
                                    },
                                    xaxis: {
                                        categories: this.birthDeathData.map(d => d.year),
                                        title: { text: 'Year' },
                                        tickAmount: window.innerWidth <= 600 ? 4 : 10,
                                        labels: { formatter: value => Math.round(value) }
                                    },
                                    yaxis: {
                                        title: { text: 'People' },
                                        labels: {
                                            formatter: value => {
                                                if (value >= 1000000) return (value / 1000000).toFixed(1) + 'M';
                                                if (value >= 1000) return Math.round(value / 1000) + 'K';
                                                return value;
                                            }
                                        }
                                    },
                                    stroke: {
                                        curve: 'smooth', // 線を滑らかに
                                    },
                                });
                                this.chartInstances.birthDeathChart.render();
                            }

                            // Corrected crimeChart rendering logic
                            if (crimeChartEl) {
                                this.chartInstances.crimeChart = new ApexCharts(crimeChartEl, {
                                    chart: { type: 'line', height: 350 },
                                    series: [
                                        { name: 'Total Crimes', data: this.crimeData.map(d => d.total) },
                                        { name: 'Minor Crimes', data: this.crimeData.map(d => d.light) },
                                        { name: 'Intermediate Crimes', data: this.crimeData.map(d => d.medium) },
                                        { name: 'Serious Crimes', data: this.crimeData.map(d => d.serious) }
                                    ],
                                    colors: ['#008FFB', '#00E396', '#FEB019', '#FF4560'],
                                    tooltip: {
                                        custom: ({ series, seriesIndex, dataPointIndex, w }) => {
                                            const allSeries = w.config.series.map((s, i) => ({
                                                name: s.name,
                                                value: s.data[dataPointIndex],
                                                color: w.config.colors[i]
                                            }));
                                            allSeries.sort((a, b) => b.value - a.value);
                                            let tooltipHTML = `<div class="apex-tooltip-custom" style="background: #fff; padding: 0px; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">`;
                                            tooltipHTML += `<div style="font-size: 12px; color: rgba(0, 0, 0, .6); padding: 6px; margin-bottom: 10px; background: #ECEFF1;">${w.globals.categoryLabels[dataPointIndex]}</div>`;
                                            allSeries.forEach(s => {
                                                tooltipHTML += `
                                                    <div style="display: flex; align-items: center; padding: 0px 10px 10px 10px;">
                                                    <span style="display:inline-block;width:12px;height:12px;background-color:${s.color}; border-radius:50%; margin-right: 10px;"></span>
                                                    <span style="font-size:12px;">${s.name}: <span style="font-weight:bold;">${s.value >= 1000000 ? (s.value / 1000000).toFixed(1) + 'M' : s.value >= 1000 ? Math.round(s.value / 1000) + 'K' : s.value}</span></span>
                                                    </div>`;
                                            });
                                            tooltipHTML += `</div>`;
                                            return tooltipHTML;
                                        }
                                    },
                                    xaxis: {
                                        categories: this.crimeData.map(d => d.year),
                                        title: { text: 'Year' },
                                        tickAmount: window.innerWidth <= 600 ? 4 : 10,
                                        labels: { formatter: value => Math.round(value) }
                                    },
                                    yaxis: {
                                        title: { text: 'Cases' },
                                        labels: {
                                            formatter: value => {
                                                if (value >= 1000000) return (value / 1000000).toFixed(1) + 'M';
                                                if (value >= 1000) return Math.round(value / 1000) + 'K';
                                                return value;
                                            }
                                        }
                                    },
                                    stroke: {
                                        curve: 'smooth', // 線を滑らかに
                                    },
                                });
                                this.chartInstances.crimeChart.render();
                            }

                            if (diseaseChartEl) {
                                this.chartInstances.diseaseChart = new ApexCharts(diseaseChartEl, {
                                    chart: { type: 'line', height: 350 },
                                    series: [
                                        { name: 'Disease', data: this.diseaseData.map(d => d.disease) },
                                        // covidDeathsが0の場合はnullに変換し、グラフにプロットしない
                                        { name: 'COVID-19', data: this.diseaseData.map(d => d.covidDeaths === 0 ? null : d.covidDeaths) }
                                    ],
                                    colors: ['#008FFB', '#00E396'],
                                    tooltip: {
                                        custom: ({ series, seriesIndex, dataPointIndex, w }) => {
                                            const allSeries = w.config.series.map((s, i) => ({
                                                name: s.name,
                                                value: s.data[dataPointIndex],
                                                color: w.config.colors[i]
                                            }));
                                            allSeries.sort((a, b) => (b.value || 0) - (a.value || 0));
                                            let tooltipHTML = `<div class="apex-tooltip-custom" style="background: #fff; padding: 0px; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">`;
                                            tooltipHTML += `<div style="font-size: 12px; color: rgba(0, 0, 0, .6); padding: 6px; margin-bottom: 10px; background: #ECEFF1;">${w.globals.categoryLabels[dataPointIndex]}</div>`;
                                            allSeries.forEach(s => {
                                                let displayValue;
                                                // 値がnullの場合（covidDeathsが0の年）は 'No Data' と表示
                                                if (s.value === null) {
                                                    displayValue = 'No Data';
                                                } else {
                                                    displayValue = s.value >= 1000000 ? (s.value / 1000000).toFixed(1) + 'M' : s.value >= 1000 ? Math.round(s.value / 1000) + 'K' : s.value;
                                                }
                                                tooltipHTML += `
                                                    <div style="display: flex; align-items: center; padding: 0px 10px 10px 10px;">
                                                    <span style="display:inline-block;width:12px;height:12px;background-color:${s.color}; border-radius:50%; margin-right: 10px;"></span>
                                                    <span style="font-size:12px;">${s.name}: <span style="font-weight:bold;">${displayValue}</span></span>
                                                    </div>`;
                                            });
                                            tooltipHTML += `</div>`;
                                            return tooltipHTML;
                                        }
                                    },
                                    xaxis: {
                                        categories: this.diseaseData.map(d => d.year),
                                        title: { text: 'Year' },
                                        tickAmount: window.innerWidth <= 600 ? 4 : 10,
                                        labels: { formatter: value => Math.round(value) }
                                    },
                                    yaxis: {
                                        title: { text: 'People' },
                                        labels: {
                                            formatter: value => {
                                                if (value >= 1000000) return (value / 1000000).toFixed(1) + 'M';
                                                if (value >= 1000) return Math.round(value / 1000) + 'K';
                                                return value;
                                            }
                                        }
                                    },
                                    stroke: {
                                        curve: 'smooth', // 線を滑らかに
                                    },
                                });
                                this.chartInstances.diseaseChart.render();
                            }

                            if (murderSuicideChartEl) {
                                this.chartInstances.murderSuicideChart = new ApexCharts(murderSuicideChartEl, {
                                    chart: { type: 'line', height: 350 },
                                    series: [
                                        { name: 'Suicides', data: this.deathData.map(d => d.suicides) },
                                        { name: 'Accidental Deaths', data: this.deathData.map(d => d.accidents) },
                                        { name: 'Murders', data: this.deathData.map(d => d.murders) }
                                    ],
                                    colors: ['#1E90FF', '#32CD32', '#FF4500'],
                                    tooltip: {
                                        custom: ({ series, seriesIndex, dataPointIndex, w }) => {
                                            const allSeries = w.config.series.map((s, i) => ({
                                                name: s.name,
                                                value: s.data[dataPointIndex],
                                                color: w.config.colors[i]
                                            }));
                                            allSeries.sort((a, b) => b.value - a.value);
                                            let tooltipHTML = `<div class="apex-tooltip-custom" style="background: #fff; padding: 0px; border-radius: 4px; box-shadow: 0 2px 4px rgba(0,0,0,0.1);">`;
                                            tooltipHTML += `<div style="font-size: 12px; color: rgba(0, 0, 0, .6); padding: 6px; margin-bottom: 10px; background: #ECEFF1;">${w.globals.categoryLabels[dataPointIndex]}</div>`;
                                            allSeries.forEach(s => {
                                                tooltipHTML += `
                                                    <div style="display: flex; align-items: center; padding: 0px 10px 10px 10px;">
                                                    <span style="display:inline-block;width:12px;height:12px;background-color:${s.color}; border-radius:50%; margin-right: 10px;"></span>
                                                    <span style="font-size:12px;">${s.name}: <span style="font-weight:bold;">${s.value >= 1000000 ? (s.value / 1000000).toFixed(1) + 'M' : s.value >= 1000 ? Math.round(s.value / 1000) + 'K' : s.value}</span></span>
                                                    </div>`;
                                            });
                                            tooltipHTML += `</div>`;
                                            return tooltipHTML;
                                        }
                                    },
                                    xaxis: {
                                        categories: this.deathData.map(d => d.year),
                                        title: { text: 'Year' },
                                        tickAmount: window.innerWidth <= 600 ? 4 : 10,
                                        labels: { formatter: value => Math.round(value) }
                                    },
                                    yaxis: {
                                        title: { text: 'People' },
                                        labels: {
                                            formatter: value => {
                                                if (value >= 1000000) return (value / 1000000).toFixed(1) + 'M';
                                                if (value >= 1000) return Math.round(value / 1000) + 'K';
                                                return value;
                                            }
                                        }
                                    },
                                    stroke: {
                                        curve: 'smooth', // 線を滑らかに
                                    },
                                });
                                this.chartInstances.murderSuicideChart.render();
                            }

                            if (missingPersonsChartEl) {
                                this.chartInstances.missingPersonsChart = new ApexCharts(missingPersonsChartEl, {
                                    chart: { type: 'line', height: 350 },
                                    series: [{ name: 'Unfound Missing Persons', data: this.missingPersonsData.map(d => d.missing) }],
                                    xaxis: {
                                        categories: this.missingPersonsData.map(d => d.year),
                                        title: { text: 'Year' },
                                        tickAmount: window.innerWidth <= 600 ? 4 : 10,
                                        labels: { formatter: value => Math.round(value) }
                                    },
                                    yaxis: {
                                        title: { text: 'People' },
                                        labels: {
                                            formatter: value => {
                                                if (value >= 1000000) return (value / 1000000).toFixed(1) + 'M';
                                                if (value >= 1000) return Math.round(value / 1000) + 'K';
                                                return value;
                                            }
                                        }
                                    },
                                    stroke: {
                                        curve: 'smooth', // 線を滑らかに
                                    },
                                });
                                this.chartInstances.missingPersonsChart.render();
                            }
                        }
                        else if (this.selectedCategory === 'Economy') {
                            const corporationChartEl = document.querySelector('#corporationChart');
                            const minimumWageChartEl = document.querySelector('#minimumWageChart');
                            const averageWageChartEl = document.querySelector('#averageWageChart');
                            const cpiChartEl = document.querySelector('#cpiChart');
                            const riceProductionChartEl = document.querySelector('#riceProductionChart');
                            const monthlyTouristChartEl = document.querySelector('#monthlyTouristChart');

                            if (corporationChartEl) {
                                this.chartInstances.corporationChart = new ApexCharts(corporationChartEl, {
                                    chart: { type: 'line', height: 350 },
                                    series: [{ name: 'Corporations', data: this.corporationData.map(d => d.corporations) }],
                                    xaxis: {
                                        categories: this.corporationData.map(d => d.year),
                                        title: { text: 'Year' },
                                        tickAmount: window.innerWidth <= 600 ? 4 : 10,
                                        labels: { formatter: value => Math.round(value) }
                                    },
                                    yaxis: {
                                        title: { text: 'Corporations' },
                                        labels: {
                                            formatter: value => {
                                                if (value >= 1000000) return (value / 1000000).toFixed(1) + 'M';
                                                if (value >= 1000) return Math.round(value / 1000) + 'K';
                                                return value;
                                            }
                                        }
                                    },
                                    stroke: {
                                        curve: 'smooth', // 線を滑らかに
                                    },
                                });
                                this.chartInstances.corporationChart.render();
                            }

                            if (minimumWageChartEl) {
                                this.chartInstances.minimumWageChart = new ApexCharts(minimumWageChartEl, {
                                    chart: { type: 'line', height: 350 },
                                    series: [{ name: 'Minimum Wage', data: this.minimumWageData.map(d => d.wage) }],
                                    xaxis: {
                                        categories: this.minimumWageData.map(d => d.year),
                                        title: { text: 'Year' },
                                        tickAmount: window.innerWidth <= 600 ? 4 : 10,
                                        labels: { formatter: value => Math.round(value) }
                                    },
                                    yaxis: {
                                        title: { text: 'Minimum Wage (JPY/Hour)' },
                                        labels: { formatter: value => Math.round(value) }
                                    },
                                    stroke: {
                                        curve: 'smooth', // 線を滑らかに
                                    },
                                });
                                this.chartInstances.minimumWageChart.render();
                            }

                            if (averageWageChartEl) {
                                this.chartInstances.averageWageChart = new ApexCharts(averageWageChartEl, {
                                    chart: { type: 'line', height: 350 },
                                    series: [{ name: 'Average Wage', data: this.averageWageData.map(d => d.wage) }],
                                    xaxis: {
                                        categories: this.averageWageData.map(d => d.year),
                                        title: { text: 'Year' },
                                        tickAmount: window.innerWidth <= 600 ? 4 : 10,
                                        labels: { formatter: value => Math.round(value) }
                                    },
                                    yaxis: {
                                        title: { text: 'Average Wage (JPY/Month)' },
                                        labels: {
                                            formatter: value => {
                                                if (value >= 1000000) return (value / 1000000).toFixed(1) + 'M';
                                                if (value >= 1000) return Math.round(value / 1000) + 'K';
                                                return value;
                                            }
                                        }
                                    },
                                    stroke: {
                                        curve: 'smooth', // 線を滑らかに
                                    },
                                });
                                this.chartInstances.averageWageChart.render();
                            }

                            if (cpiChartEl) {
                                this.chartInstances.cpiChart = new ApexCharts(cpiChartEl, {
                                    chart: { type: 'line', height: 350 },
                                    series: [{ name: 'Consumer Price Index', data: this.cpiData.map(d => d.cpi) }],
                                    xaxis: {
                                        categories: this.cpiData.map(d => d.year),
                                        title: { text: 'Year' },
                                        tickAmount: window.innerWidth <= 600 ? 4 : 10,
                                        labels: { formatter: value => Math.round(value) }
                                    },
                                    yaxis: {
                                        title: { text: 'Consumer Price Index (2024=100)' },
                                        labels: { formatter: value => Math.round(value) }
                                    },
                                    stroke: {
                                        curve: 'smooth', // 線を滑らかに
                                    },
                                });
                                this.chartInstances.cpiChart.render();
                            }

                            if (riceProductionChartEl) {
                                this.chartInstances.riceProductionChart = new ApexCharts(riceProductionChartEl, {
                                    chart: { type: 'line', height: 350 },
                                    series: [{ name: 'Rice Production', data: this.riceProductionData.map(d => d.production) }],
                                    xaxis: {
                                        categories: this.riceProductionData.map(d => d.year),
                                        title: { text: 'Year' },
                                        tickAmount: window.innerWidth <= 600 ? 4 : 10,
                                        labels: { formatter: value => Math.round(value) }
                                    },
                                    yaxis: {
                                        title: { text: 'Rice Production (tons)' },
                                        labels: {
                                            formatter: value => {
                                                if (value >= 1000000) return (value / 1000000).toFixed(1) + 'M';
                                                if (value >= 1000) return Math.round(value / 1000) + 'K';
                                                return value;
                                            }
                                        }
                                    },
                                    stroke: {
                                        curve: 'smooth', // 線を滑らかに
                                    },
                                });
                                this.chartInstances.riceProductionChart.render();
                            }

                            if (monthlyTouristChartEl) {
                                // --- データの前処理 ---
                                const years = [2020, 2021, 2022, 2023, 2024];
                                const months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];

                                // 年ごとのデータを生成
                                const seriesData = years.map(year => {
                                    const data = Array(12).fill(null); // 12ヶ月分のデータをnullで初期化
                                    this.monthlyTouristData
                                        .filter(d => d.year === year)
                                        .forEach(d => {
                                            data[d.month - 1] = d.tourists; // 該当する月にデータを格納
                                        });
                                    return {
                                        name: year.toString(),
                                        data: data
                                    };
                                });
                                // --- ここまで ---

                                this.chartInstances.monthlyTouristChart = new ApexCharts(monthlyTouristChartEl, {
                                    chart: {
                                        type: 'line', // グラフタイプを'line'に変更
                                        height: 350,
                                    },
                                    series: seriesData, // 整形したデータを設定
                                    xaxis: {
                                        categories: months, // X軸に月を設定
                                        title: {
                                            text: 'Month'
                                        }
                                    },
                                    yaxis: {
                                        title: {
                                            text: 'Number of Tourists (people)'
                                        },
                                        labels: {
                                            formatter: value => {
                                                if (value >= 1000000) return (value / 1000000).toFixed(1) + 'M';
                                                if (value >= 1000) return Math.round(value / 1000) + 'K';
                                                if (value === null) return '';
                                                return value.toLocaleString();
                                            }
                                        }
                                    },
                                    stroke: {
                                        curve: 'smooth', // 線を滑らかに
                                    },
                                    tooltip: {
                                        shared: true, // 同じ月の全データをまとめて表示
                                        intersect: false,
                                        y: {
                                            formatter: function (val) {
                                                if (val == null) {
                                                    return 'No Data';
                                                }
                                                // M (Million) 単位
                                                if (val >= 1000000) {
                                                    return (val / 1000000).toFixed(2) + 'M';
                                                }
                                                // K (Kilo) 単位
                                                if (val >= 1000) {
                                                    return (val / 1000).toFixed(1) + 'K';
                                                }
                                                // 1000未満
                                                return val.toLocaleString() + "";
                                            }
                                        }
                                    },
                                });
                                this.chartInstances.monthlyTouristChart.render();
                            }
                        }
                        else if (this.selectedCategory === 'Prefectures (2024)') {
                            // Load and set up the SVG
                            this.loadAndSetupSVG('stats');
                        }
                        else if (this.selectedCategory === 'Prefecture Rankings (2024)') {
                            this.loadAndSetupSVG('ranking');
                        }
                    });
                },
                // Prefectures (2024)
                async loadAndSetupSVG(type) {
                    try {
                        const response = await fetch('../../Asset/Image/Japan_Life/Japan_1.svg');
                        if (!response.ok) throw new Error('SVG file not found.');
                        this.svgContent = await response.text();

                        this.$nextTick(() => {
                            const svgElement = this.$el.querySelector('#panzoom-container svg');
                            if (!svgElement) return;

                            svgElement.style.width = '95%';
                            svgElement.style.height = 'auto';

                            this.setupPanzoom(svgElement);

                            Object.keys(this.prefectureStats).forEach(prefectureId => {
                                const group = svgElement.querySelector(`#${prefectureId}_group`);
                                if (group) {
                                    group.style.cursor = 'pointer';
                                    group.addEventListener('click', () => {
                                        this.showPrefectureData(prefectureId, type); // Pass the type argument
                                    });
                                }
                            });

                            this.updateMapColors();
                        });
                    } catch (error) {
                        console.error('Failed to load SVG:', error);
                        this.svgContent = '<p>Could not load map.</p>';
                    }
                },

                setupPanzoom(svgElement) {
                    if (this.panzoomInstance) {
                        this.panzoomInstance.destroy();
                    }
                    const container = document.getElementById('panzoom-container');
                    if (svgElement && container) {
                        this.panzoomInstance = Panzoom(svgElement, {
                            maxScale: 5,
                            minScale: 0.5,
                            contain: 'outside'
                        });
                        container.addEventListener('wheel', this.panzoomInstance.zoomWithWheel);
                    }
                },

                showPrefectureData(prefectureId, type) {
                    if (type === 'stats') {
                        const data = this.prefectureStats[prefectureId];
                        if (data) {
                            this.selectedStatPrefecture = { id: prefectureId, data: data };
                            this.statsDialog = true;
                        }
                    } else if (type === 'ranking') {
                        // Get all ranking data for the corresponding prefecture from prefectureRanking
                        const rankData = this.prefectureRanking[prefectureId];
                        // The dialog opens even if no data exists
                        this.selectedRankingPrefecture = { id: prefectureId, data: rankData || {} };
                        this.rankingDialog = true;
                    }
                },

                // Modified updateMapColors method to add ranking support
                updateMapColors() {
                    const svgElement = this.$el.querySelector('#panzoom-container svg');
                    if (!svgElement) return;

                    let dataKey, dataObject;
                    if (this.selectedCategory === 'Prefectures (2024)') {
                        dataKey = this.dataKeyMap[this.selectedPrefectureData];
                        dataObject = this.prefectureStats;

                        const values = Object.values(dataObject).map(p => p[dataKey]).filter(v => v !== undefined);
                        if (values.length === 0) return;
                        const minValue = Math.min(...values);
                        const maxValue = Math.max(...values);
                        const averageValue = values.reduce((sum, val) => sum + val, 0) / values.length;

                        Object.entries(dataObject).forEach(([prefectureId, stats]) => {
                            const pathElement = svgElement.querySelector(`#${prefectureId}`);
                            if (pathElement) {
                                const value = stats[dataKey];
                                const color = this.getGradientColor(value, minValue, maxValue, averageValue);
                                pathElement.style.fill = color;
                            }
                        });

                    } else if (this.selectedCategory === 'Prefecture Rankings (2024)') {
                        const dataKey = this.rankingDataKeyMap[this.selectedRankingData];
                        // Also check subCategoryKey ('Food' or 'Life')
                        if (!dataKey || !this.subCategoryKey) return;

                        // Loop through all prefectures
                        Object.keys(this.prefectureStats).forEach(prefectureId => {
                            const pathElement = svgElement.querySelector(`#${prefectureId}`);
                            if (pathElement) {
                                // Get data from the correct level of prefectureRanking
                                const rankData = this.prefectureRanking[prefectureId];
                                const subRankData = rankData ? rankData[this.subCategoryKey] : null;
                                const rank = subRankData && subRankData[dataKey] ? subRankData[dataKey].ranking : null;

                                const color = this.getRankingColor(rank);
                                pathElement.style.fill = color;
                            }
                        });
                    }
                },

                // ★★★★★ Added: Method to calculate gradient color based on value ★★★★★
                getGradientColor(value, min, max, avg) {
                    const startColor = { r: 17, g: 17, b: 212 };    // #1111D4 (Blue) - Good (low values)
                    const endColor = { r: 212, g: 17, b: 17 };      // #D41111 (Red) - Bad (high values)

                    // Calculate the mid-color (purple)
                    const midColor = {
                        r: Math.round((startColor.r + endColor.r) / 2),
                        g: Math.round((startColor.g + endColor.g) / 2),
                        b: Math.round((startColor.b + endColor.b) / 2)
                    };

                    if (max === min) {
                        return `rgb(${startColor.r}, ${startColor.g}, ${startColor.b})`;
                    }

                    let ratio;
                    let c1, c2;

                    // When value is below average, gradient from start color (blue) to mid color (purple)
                    if (value <= avg) {
                        c1 = startColor;
                        c2 = midColor;
                        const range = avg - min;
                        // Avoid division by zero (if min and avg are the same)
                        ratio = range === 0 ? 1 : (value - min) / range;
                    } else {
                        // When value is above average, gradient from mid color (purple) to end color (red)
                        c1 = midColor;
                        c2 = endColor;
                        const range = max - avg;
                        // Avoid division by zero (if max and avg are the same)
                        ratio = range === 0 ? 1 : (value - avg) / range;
                    }

                    ratio = Math.max(0, Math.min(1, ratio));

                    const r = Math.round(c1.r + (c2.r - c1.r) * ratio);
                    const g = Math.round(c1.g + (c2.g - c1.g) * ratio);
                    const b = Math.round(c1.b + (c2.b - c1.b) * ratio);

                    return `rgb(${r}, ${g}, ${b})`;
                },

                getRankingColor(rank) {
                    // If rank is null or undefined, return the 'other' color
                    if (rank === null || rank === undefined) {
                        return '#E0E0E0';
                    }

                    if (rank === 1) return '#D41111'; // 1st place: Red
                    if (rank === 2) return '#E35D5D'; // 2nd place
                    if (rank === 3) return '#F1AAAA'; // 3rd place

                    if (rank === 47) return '#1111D4'; // Last place: Blue
                    if (rank === 46) return '#5D5DE3'; // 2nd to last
                    if (rank === 45) return '#AAAAF1'; // 3rd to last

                    return '#E0E0E0'; // Other ranks
                },
            },
            mounted() {
                this.renderCharts();
            },
            watch: {
                selectedPrefectureData() {
                    this.updateMapColors();
                },
                selectedRankingData() {
                    this.updateMapColors();
                }
            },
        });
    </script>
</body>

</html>